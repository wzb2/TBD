<!DOCTYPE html>
<html lang="en">
<body onresize="resize()">
<title>TBD</title>

<!--

    Basic raycasting engine adapted from tutorial here: 
    https://github.com/vinibiavatti1/RayCastingTutorial
    Everything not from the turorial is original or adapted from something on the internet / AI

-->

<canvas id="canvas"></canvas>

<script>

let mainMenuBackground = new Image();
mainMenuBackground.src = "FinalCoverCropped.png";

let TBDLogo = new Image();
TBDLogo.src = "data:image/png;base64,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"

let melee1 = new Image();
melee1.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAdRJREFUeF7tlmtuhDAMhJPTcSY4AJyJ01GlUirX9SshrVR59he7eIP9ecamluSfmrz+AgBQQHICsEByAWAIwgKwQHICsEByAWALwAKwQHICsEByAWALwAKwQHICsEByAWALwAKwQHICsEByAWALwAKwQHICsEByAWALwAKwQHICsEByAWALwAKwwD8m8DzPo6Vfaw2pOxS0ipGVcH9GJHF6jhTv3af1hABoiY8mexyHy/I8z68Yq7jIs9tBLXcr1gXQi+eHSFCkmEjRGpUGg56p5eJRtSCYAEYeKAF5U3wviiqi/RbtPIUyBUD7k9f5fn9F8RxCRIXSLFkCwBosVCntWir+uq6y77un1qLFUTt4Q44XPAxAkr43TGhSWvc9CNb9USvQfC0r/5gBPHhkDvSpa8lfK9KDwweiJ6WoCkQAfPKODJ63FmiFSTBmANChqSnYBDDa/d4VDYLXteg6jJ7DZ5PUyG8AorLxErA2gdTdiPdHVCitwJACooPDA+ApoRVMP9p2GJW9lFevaQrALHXegf69D8dt28p9358/0+v23XsVjsKnTWh1uABWyd9KUHqJ4vEroE9Z4C8AjHZvRXzYAqkBvH35WdGp3zqDr0L6btCuPwC93YtQoLAVggAAAABJRU5ErkJgggAA";

let melee2 = new Image();
melee2.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAc9JREFUeF7tl1GOgzAMRMnpOBMcAM7E6ahSKZU3a2ccgqq2nv3qgpswzzMOTVPwvxRc/0QAdEBwAoxAcANwCDICjEBwAoxAcAPwFGAEGIHgBBiB4AbgKcAIMALBCTACwQ3AU4ARYASCE2AEghuApwAjwAgEJ8AIBDcATwFGgBEIToARCG4AngKMwK9E4DzPU9OSUmo2+asdUIuuxZb7LQhvBWB1SXYOdSzXynVQfa4dBnDVXvXDrusKE7dt26tGe3BPV+UmqB46wFpAg6JZ0CPaopJhyDWRGGudlguaAHo21ICMiC9ipCPyNWT5XggmAJSd1kb53h3iawjWkPNMf0vPJQBomGni932flmWBM8Cqk3HwDMFasOVmFUDL+p57VvcRhNb93ihoHdeu/QPgEdjKYf5+y/6WSASnHojIShaAeo6oACyBnrlgAUACpSCtthdAOYLR0HQD6D0R7h6CSEjv9C/1fwC0Ouzpflm0wPIOQ0/2vwqABGFBkB2zTocrtq+dgBrnckCP/bUHKNcKjHmep+M4npfl5/w/ehVGw+8yAESqd2OtHr0/jLzpDc+AdwC4A2LvGkjXKwKosHfjT6lHup4ARjL+KULRbxPrFHkAs41TUPN2FzgAAAAASUVORK5CYIIA";

let melee3 = new Image();
melee3.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAdRJREFUeF7tl+sNgzAMhJPpmAkGgJmYjiqVqCzLz0KFVF9/9WGl9uc7O/RW/NWL198AAAooTgAWKC4ADEFYABYoTgAWKC4AbAFYABYoTgAWKC4AbAFYABYoTgAWKC4AbAFYABYoTgAWKC4AbAFYABYoTgAWKC4AbAFYABYoTgAWKC4AbAFYIGqB4zgOGtt7/wt4bhFn4bxgCuQpGLwp3zQoBMAqUAMkKctK+IyPwPTgZ3IyAYyDMglJsTTZZVlcx63r+omxzovm5cWpADIUR8ZS/PguUrRGZcCgBVg5WVa1IIgAssXTArId9yRBFTFirVmk2chSsgpAoyb5WOrSlc5zKCcErXhPJbcAsAYPVYwm+23b2jzPXsObFkftEBmCHIrW0LACvIEYkb4HwfrdswK3oaeKj114S7j/s/PAG3xakR4cPhAtKUnN0hp4+R4gAZT87xVIz5FiHwGQ7f5ZhKcCdxCwgEzx50qWBqY0B265CGk2iioh4n3vQmPNAA3Ke61q3fi2+zwRDQKN07ZDtvNUgfzOkJ4B3tSPyljaDtM0tX3f30fQ9+OzdxWO/q+kypQF7gKg3RK1QjJSz8B4TAGZJH8ZCwDKk+3tD0O/7OLVs6XB/gJhaXdQ6Pkg7gAAAABJRU5ErkJgggAA";

let ranged1 = new Image();
ranged1.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAd1JREFUeF7tlsuNwzAMROW2cklddgF2XbmkLS+0gAxC4VcWgl1wcnJiRiIfZygtJflnSV5/AQAoIDkBWCC5ADAEYQFYIDkBWCC5AHAKwAKwQHICsEByAeAUgAVggeQEYIHkAsApAAvAAskJwALJBYBTABaABZITgAWSCwCnACwACyQnAAskFwBOAVgAFvjHBM7zPKX0l2VxqdsVNIuRlnDbw5M4XYeLt97TelwApMSjyW7bZrLc9/2K0Yrz7F0XqrlrsSaAVny/CAeFi/EULVGpMOiaUi4WVQ2CCiCyIQfkTvGtKKqI+pu38xTKEADpT1bn2/sZxfcQPCrkZskUANpgoUqpz1zxx3GUdV0ttRYpjtrBGnJ9wWEAnPStYUKTkrpvQdDeR61A89Ws/DED+uDIHGhTV5O/VKQFpx+IlpS8KmAB9JM3MnjuWqAWxsEYAUCHpqRgFUC0+60rEgTatf31ur5uz6fa0GjxNI8GwQXAKxuP/GqMZAVafFtLgtC8H1EhdwSGAYx2v9+cg+AFMNr5aQBGqfcJXF0mV+FfCO93KY9Hod23rsKW+vr3rfOmAmbJX0uQu0T18TOgDyngGwCi3ZsR/6cUMKOg6BouAHcvP9GkvhnfX9Pp3aA+/wBEXopQo39fsgAAAABJRU5ErkJgggAA";

let ranged2 = new Image();
ranged2.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAd1JREFUeF7tl1GOwjAMRNNr8cO52gOUc/HDtboKUipv1vYkDa3EevgkbtJ5nnFgSsE/U3D9iQDogOAEGIHgBuAQZAQYgeAEGIHgBuAtwAgwAsEJMALBDcBbgBFgBIITYASCG4C3ACPACAQnwAgENwBvAUaAEQhOgBEIbgDeAowAIxCcACMQ3AC8BRiB/xKBbds2Tcs0TW6Tv9oBtehabFn3IFwKwOqS7BzqWK6V+6D6XDsM4Ki96pddlgUmbl3XvUZ78ZauykNQPXSAtYEGRbNgi2iLSoYh90RirH08F7gAeg7UgIyIL2KkI/J3yPK9EEwAKDveQXntE+JrCNaQa5n+lp5DANAw08Q/Ho80zzOcAVadjEPLEKwFW25WAXjWb1mzuo8geOu9UdA6rn33B0CLQC+H+XnP/pZIBKceiMhKFoB6jqgALIEtc8ECgARKQVptL4ByBaOh2Qyg90ZAQ3B9PnfNy/3uNvSI+LIhatovAF4x2kj78WFBkOLLcxaEkn3Uyd7rr9SfAkDS1yC0Ahjp/Ecd0GP/uhPyypIw3hBer5RutyS7j34Ko+Gnnd/0X6DH4r0vIbuBnj1q9eEIXAEAiT9jHenaZwAqPOPlrtgT6XoDGMn4FSJGzkDafgA6DlJQPmridwAAAABJRU5ErkJgggAA";

let ranged3 = new Image();
ranged3.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAd5JREFUeF7tlktuwzAMRKVrZZNz2Qewz5VNruVCRWUQBD+io8JoOV2mjKJ5nCFVS/K/mlx/AQA4IDkBRCC5ATAEEQFEIDkBRCC5AbAFEAFEIDkBRCC5AbAFEAFEIDkBRCC5AbAFEAFEIDkBRCC5AbAFEAFEIDkBRCC5AbAFEAFEIDkBRCC5AbAFEIHRCBzHcdDaWuu/gOeK6MK5YArkLhi8KVcaNATAEqgBkpxlXbjXj8D04EfuZAJoB0UuJNXSy67r6iZu27azxjpv9F5enQogQrHdWKpvn42I1qg0GFSAdScrqhYEEUBUPBUQ7bhnCeqIVmvNIi1GlpNVABo1KcdSlz7pPIfSIWjiPZdMAWANHuoYzfb7vpdlWbyGF62OxmFkCHIoWkOHHeANxBHrexCs/3tR4DH0XHHGhbeE5z86D7zBp4n04PCBaFlJapbWwI/fARJAKf+eQHqOVHsLgGj3uwjPBa1ue71Ozevzac6GiPi+kqWBKc2BKQ8hLUbaJqDi+3c1CNoG+PUIXO0+H0YShFEA0c5TB/I3Q3gGeFPf3Wc/Bdp2+IbwfpfyeBTafe8pPPq7kitDEZgFQHslakK8t/ufBnD18jO+d1sEZlx+xhkhADMG4IxLzz5D0vUF59t2UCOS1QgAAAAASUVORK5CYIIA";

let largeRanged1 = new Image();
largeRanged1.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA3dJREFUeF7tmTGr4kAQx9dKKz0shAMRBOF1FhZ2WmmnlXZ2fgBLD+4DHDxLP4CdnVbamUo7Cwu7B4IgwoGFnFZa5ZjAyGbd1Wx21YfZVDFmJ/P/zX8mMYZIwLdQwPUTA8A4IOAETAsE3ABmCJoWMC0QcAKmBQJuAHMXMC1gWiDgBEwLBNwA5i5gWsC0QMAJmBYIuAHMXeBpLZBIJGwZt+12u6fk9rCLsII7nY6MftJut13nPwqIVgC0aFnB9+jQQHTC0AIAhfNEt1ot0u127+njfi9aizB0gFAGAOJvVRtEwCYLwcs6AKEKQQnAPfFYVhRTr9c9OWEwGHiGpgrBNwCe+Ol06hIIQryKFpHhxSgWi67TVSD4AgDiK5WKp2qKThqPx66vdMTz0w7SAFTFo/BkMukCsN1unc8qICC2LISXADidTiSTybgArFYrEolEvjcAHdXPZrOO8Pl8Tn4fj87+n2iU5PN5Z3+5XD4VgpQDdAIoWRb5BYo/Psjn1xexSqXvB6BWq9nD4TCUy+XsxWIReggAQsgnIdoBYM6oQTSMhQ6AhbhovV47uzCoVIfUM1oAB2w6nb7ohkLyINwEAEOJ3iaTiRIAiAWTGoZgtVp1xR6NRspDEOOXy2VXbLieFIBms2mfz2cnUdgQhC4AEJNNEmKr3gZZAHT+4XCY9Hq9q4JzHQAADoeDQw16Ca0EIHRAwETpMqm0FsYBdwFYFA6tC7ML2jkWi3kH0Gg0bLQNAIALYKDZbKbcBqKBpHocABQKhUvh6LyheP1+/74D6OqXSiV7v987eQEATFD1bqAqlLeefQrEwsXjcWJZltAFV0R4AGjxNASc6HgslUo9QttVzM1m4zoGD0+8R2CAIA1AZH+eMnACC0FEQBYOK1IUVyQezmfbl9cGLgfg9MdeoQOIEpCBoNset8SzAOAzFJe9GwgBYP/z7M8KwVdiXt2gCgKEw+bllx/dBncBwAkQGBwgA4CeC7ivGwaK9ioc82ABoD78/uIAP/a/VUn2tbgsEFqwrGg6L7aNWRfcBODF/l7t/Mo/RvCHEW8OXACo2t8riFecd6sNHADxnz+c3t///ed8pom9IuFHXJPWROu9AEDxcPFoNGofj0eplyWPSFpnTFYTQADNbyXSDzADwA+1d1pjHPBO1fSjxTjAD7V3WmMc8E7V9KPlPwuySV9XRKWVAAAAAElFTkSuQmCC";

let largeRanged2 = new Image();
largeRanged2.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA4VJREFUeF7tmTGL4kAUx2crrfSwEA5EEITFxsLCTqvYaaWdnR/A0oP7AAdr6Qews9Nq7UylnYWF3YIgiHBgIaeVVjle4MkkzphJZrK7mEmVTSYv8/+9/3szZl9IxI+XiOsnGoB2QMQJ6BKIuAF0E9QloEsg4gR0CUTcAHoV0CWgSyDiBHQJRNwAehXQJaBLIOIEdAlE3AB6Ffi0Ekin05Yftx0Oh0+ZW2gvcQvu9/t+9JNer+cYHxYQpQBo0X4Fe9GhgaiEoQQACmeJ7na7ZDAYeOlj3uc9izBUgJAGAOIfZRtEwOEXgshzAEIWghQAL/GYVhTTarWEnDAej4WhyUIIDIAlfj6fOwSCEFHRPDKsGNVq1TFcBkIgACC+Xq8LZZM3aDqdOm6piBekHHwDkBWPwjOZjAPAfr+3/5YBAbH9QvgSAJfLheTzeQeAzWZD4vH49wPQbDatyWRig1KR/WKxaAtfLpfk9/lsn/9JJEi5XLbP1+u1EgiGYVimaXom+OEAEA9ZgYwBBJUADNMkv0Dx6yt5+/ggpmEoA4DltVqtggPodDrW9Xq92RQgLBYL6eygA24ACCFvhIQGgHYwqyFzCSEAEI4uUAkgzBJAB+RyuZtmLGM3BC6AdrttofXhHB6czWZSDoAY0KkhbqPRcMzl/f1dugli/Fqt5oiNOoQdQGcfyJVKJatQKCgDABNxTxLgyi6DbgAgHA5wcCwWI8Ph8C7hTAcAgNPpZDc+6KbH45GAnSCQChfgROmMyKz/GAfcBWBR+Ha7JdAIoQ8kk0lxALT9IfvwAgwk2wdYNlR1DQBUKhU7ce55Q/JGo5G3A1jZRwA4UdnlUJVgOg5rFwgQUqkUgf0AzwV3RFgAWOspQMAlDSeSzWbD0HYXc7fbOa7B5om1BQ4EgGd/ljIWBB4Bv3DcInlxeeJhvEgZOByA3R9rhQ7Am4AfCKrt8Ug8vgs0oIMhue7VgAsAu7/IdhI/iblLQrVgjAfC4RD55UeXgScA3PCAA/wAoJsjnquGgaJFhdMOwEZI68P7NwcEsf+jDLs/i/sFQgv2K9o9r0dlcAOQ+vnDXu+Pf//Z1+iHVFj5K/8xIgwAxQexvwpIYcWA5KI2dxkwt8Kqsx+WsKBxabczASQSCet8Pnt+TAg6ge/wHLriqUWKgNYARCg98xjtgGfOrog27QARSs88RjvgmbMrou0/3FVWXyS0OjsAAAAASUVORK5CYIIA";

let largeRanged3 = new Image();
largeRanged3.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA5NJREFUeF7tmDFrYkEUhccqVmaxCCxIQBDSpUiRLlbaaaWdnT/A0oX9AQtJmR+Qzk4r7bTSzsLCRgKBQAgsWMhqlVQuZ+DKvHFG3zjzso9986oXHa/3fPecmRdTLOFXKuH6mQfgHZBwAj4CCTeA3wR9BHwEEk7ARyDhBvCngI+Aj0DCCfgIJNwA/hTwEfARSDgBH4GEG8CfAl8WgYuLi62J25bL5Zf0FtmXyIIfHh5M9LN2ux1YHxUQpwBE0aaCj9ERgbiE4QQACVeJbrVa7PHx8Zg+5fu6zxIMFyCsAUD8oWlDBC5TCGE+BxC2EKwAHBNPYyUx9Xo9lBO63W5oaLYQTgagEj8ejwMCISSsaB0ZVY1isRhYbgPhJAAQX6lUQk1Tt2gwGATeclHvlDgYA7AVT8JzuVwAwPv7O//bBgRqm0L4JwA+Pj5YoVAIAHh5eWHpdDqeAEql0nY0GqVcTP/6+poLn06n7Odmw+9/ZTLs9vaW38/nc2cQarXattfrHRxyKAfc3Nzwx1jY1NaiBKA0GrEfKHp1xe6fn9moVHIKAOLhKLjtEISDAIhgpAAYY/eMOQVwd3fH40TX2dkZe3p6UmrVAoB4KvD6+spvXTogyggQAEwfIE4GIFIEgOFwaBUB1MBOjcaq1WpgE+z3+9abINUvl8u8dqfTSVEUcK86kpUvNpvN7efnJ28UF4FwBQA1qUlqCrVtj0ERwGKxYLPZbAdA5wItgPV6zTcP5D+fz+9AuIBAjYoTsdlcqQ7cBbAYHGKbzWYZTi+44Pz8XLkPKAE0Go0t7Z60ARLNyWRiHQOVFV28BgDIPw0ONUUXqGKwBwD2p+nj/F+tVryI2KDt84ALsXIN+SmQBnfMBScBwJcDAp3p1Mzl5WUU2vZqvr29BV7Dw5PqERgQjAHo7K9SpoKgI2AKRxapq6sTj/VyfLGZyzEIOIB2f1qEArL95UZMILi2xyHxMgD8jeHKp4EWgC7/OifgdTkSrgVTPQjHFeY/PzEGRwFgAQrDASYAqDHxR1HXMEh0WOHUkwyA9NH7OwecYv9DE5Z/FjcFIgo2FS32Je4DqhhEBkC1V5hEIoy9w9YT97Ls92/c5avff7j2HQDR/ngDC2lR2C+K6zoxBrI2DkCmElchNn3pTrQdgP9l2jpImUxmu9ls9h78Qv0iZEM+7p/1AOI+oaj78w6ImnDc63sHxH1CUffnHRA14bjX/wt4EEdf56yaywAAAABJRU5ErkJgggAA";

let flamethrower1 = new Image();
flamethrower1.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAdVJREFUeF7tl9GRwzAIRJWu3IErcCWuw5W4Anfgri6jD24YDgmQNZncsPlJLiIyPHaR7lWSv17J6y8AAAUkJwALJBcAhiAsAAskJwALJBcATgFYABZITgAWSC4AnAKwACyQnAAskFwAOAVgAVggOQFYILkAcArAArBAcgKwQHIB4BSABWCB5ARggeQCwCkAC8AC/5jAfd8/rfSXZXGp2xU0i1EvYXqGJ3G+jxZvrfN6XABaiUeTPY7DZLnv+29MrzjPs+tGNfderAmAipebaFC0GE/RLSoVBt+zlYtFtQehCyDyQA3Ik+KpKK6I+p238xzKEIDWj6zO0/qM4iUEjwq1WTIFQG+wcKXUz1rx53mWbdsstZZWHLeDNeRkwWEAmvStYcKTanXfgtBbj1qB59uz8p8ZIIMjc4Cmbk/+rSItOHIgWlLyqkAFICdvZPA8tUAtTIMxAoAPzZaCuwCi3aeutCDIrl3XVdZ1tZpZosXzPAiCC4BXNlbG1klAhct3bV/yfkSF2hEYBjDafflwbR54AYx2fhqAUeoyAfrbczewrsKW+uQ6dd5UwCz59xLULlEyfgb0IQV8AkC0ezPiv0oBMwqK7uEC8PTyE03qk/Hymi7/oXoDy5yRUNgK9tgAAAAASUVORK5CYIIA";

let flamethrower2 = new Image();
flamethrower2.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAdRJREFUeF7tltGRgzAMRJ2u6IAKqIQ6qIQK6ICu7sYfzvh8klfChJk7bX4yExTDPu1KvFLwzyu4/kQAdEBwAoxAcANwCDICjEBwAoxAcANwCzACjEBwAoxAcANwCzACjEBwAoxAcANwCzACjEBwAoxAcANwCzACjEBwAoxAcANwCzACjEBwAoxAcANwCzAC/yUC53l+SVqmaeo2+U87oBXdii3XexAeBaB1qe4c6liurc9B9bl2GMBVe7UPu20bTNy6ru8a6cEtXa1vguqhA7QDJCiSBS2iNSoZRn0mEqOd03NBF4DnhhKQEfFFTO2I/BuyvBeCCgBlp3ejfO0O8S0EbchZpr+m5xIANMwk8fu+p2VZ4AzQ6uo4WIZgK1hzswigZ33LNa37CELvujcKUsel334BsAjs5TD/v2d/TSSC0w5EZCUNQDtHRACaQMtc0AAggbUgqdYLoKxgNDTNALwbwTIEj+NI8zyjZqYr4suhqGk/APSK0UHSy4cGoQhvvyUSJfuok971V+o/AqCmL0GwAhjp/K0O8Ni/7US9siyxQK/CMC9NAXLu2wGo0HtjqR69P4y86Q1H4AkAd0D0noF0PeoA78PfUW8CMJLxOx7yk2cgbd/n+FlQgisDkwAAAABJRU5ErkJgggAA";

let flamethrower3 = new Image();
flamethrower3.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAdhJREFUeF7tlv2NgzAMxdOt2IAJmIQ5mIQJ2ICtrop0OUU+f0IqdOfXfypRN9g/v2fnVZJ/XsnrLwAABSQnAAskFwCGICwACyQnAAskFwC2ACwACyQnAAskFwC2ACwACyQnAAskFwC2ACwACyQnAAskFwC2ACwACyQnAAskFwC2ACwACyQnAAskFwC2ACzgtcB5nl997DRN/wKeWUQrnBbcA3kKBm3KlQa5AGgFSoA4ZWkJt3gPTAt+JCcVQD0okhAX2ye7bZvpuHVdf2K087x5WXEigAjFmjEXX595ipaoVBh9AVpOmlU1CCyAaPF9AdGOW5LoFVFjtVkk2UhTsghAosb5mOvSnc5TKA2CVLylkiEAtMHTK0aS/b7vZVkWq+FFiuvt4BmCFIrUULcCrIHokb4FQfvdsgK1oaWKFv8LAPV/dB5Yg08q0oJDB6ImJa5ZUgNv3wNoInctUM/jYDwCINr9BsNSQYs7jqPM82zOhUjxbSVzA5ObA0MuQpwK6jNpE7TC6TdHQtoAH7fA1e7TYcRB8AKIdr5XIL0zhGeANfVN3X4HeLZDf5Z1Ffa+l1NlyAKjAEi3RKkQ6+7+pwFcTX7E/x6zwIjkR5wRAjBiAI5IevQZXF1vi4R9UIdDCsYAAAAASUVORK5CYIIA";

let helicopter1 = new Image();
helicopter1.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAYAAACO98lFAAAAAXNSR0IArs4c6QAAAd5JREFUeF7tmj2OgzAQhSenoKOlpkCCgyBuQcM5aLgF4iBGoqCmpeMUu7J2HSF27cnKTPjZlyYFjvF8fvOeSfIgvOgBBgQIWgRQwh4Qsiz7OLqllFJem8l+mCsySRIng2VZvBkFQeCcYxgG53UOkhOCBhCGoVcRXAFN01BZlqIg53kmF4jDldC2LRVF4YTAgRRVwisS4NqFm0MpRVmWccO85M5NziqBm2CH69pYD12H9819lTBNE0VR5MWSMz5uchYCV6RvOozjSHEcn9cTkA7feyOtBKQDkc5vpAMRXT8dOOfdXu/7nn3WSNOUNey/3tc1/i03Wxde1zW7/qqqnmPeAUQcggbwSuE2MhqINAgxCGb3fQAYMEYZUjBEIewBYA3iUhBsLdB1HeV5znqCbZxUa4goweUDHAjX9dtA0DKwFcoBugUErkjTJ7doB12MbzRujUNKBfo+Ip5gIOh3V0LoHTcvl2FeNiJNcb6KkFSAWaOYEtZy/vfHZjxAsceicwx4Szuco1T7KgBBMiLPvvvr9UEJUMKXHqAEQIASnt6IdkA7oB3QDjgsbY6zMEYYI4wRxghjhDH+/KYD6YB0QDogHZAOSAekw6+/BCAiEZGISEQkIhIRiYhERNr+LvAJgm3dQsSBfCIAAAAASUVORK5CYIIA";

let bullet1 = new Image();
bullet1.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAgCAYAAADT5RIaAAAAAXNSR0IArs4c6QAAABBJREFUGFdjYBi84P9ihv8AB4QCorkznioAAAAASUVORK5CYIIA";

let spooderPew = new Image();
spooderPew.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAABACAYAAADS+r06AAAAAXNSR0IArs4c6QAAAE1JREFUOE9jZMACGEcFUUNgNEDQUsRogIwGCDwEaJIY/jMw/GdkYGBEoxkYQAIMixkYGGIZGEAKwCrAAhYMDAwn4BI4VGI1E728I95HALYdFjsdH126AAAAAElFTkSuQmCC";

let bigSpooderPew = new Image();
bigSpooderPew.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAPBJREFUeF7tlbENhDAQBO2Y7BujG4qgGxr77GMQRkboE7L1SjskgAjubm8G1xJ+1fD5CwFAQHgCKBAOAD9BFECB8ARQIBwATgEUQIHwBFAgHABOARRAgfAEUCAcAE4BFECB8ARQIBwATgEUQIHwBFBADcD+nff62Vrw5/N5f773Z1VfQwjog5dpueb8re2mHr7VVCX93Pg9+H/xAUFIA+jzxhLQKYj/Byi1e6s1RIG3ppTfCUCZtmMtCHDcirInCFCm7VgLAhy3ouwJApRpO9aCAMetKHuCAGXajrUgwHEryp4gQJm2Yy0IcNyKsqd4Ag4CtCpBXaY2PwAAAABJRU5ErkJgggAA";

let explosion = new Image();
explosion.src = "data:image/png;base64,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";

let pewPewOff = new Image();
pewPewOff.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAA11JREFUeF7tm0Fy2kAUBeUVN9CCYsMVuAXH5EJcgQ1FUeIErJz6MmNLU5CRWInp1sZJRU7pvd/TM8jJV+OFbuALnd7wjQDAIRAAAYA3AI+vAQQA3gA8vgYQAHgD8PgaQADgDcDjawABgDcAj68BBADeADy+BhAAeAPw+BpAAOANwONrAAGANwCPrwEEAN4APL4GEAB4A/D4GkAA4A3A42sAAYA3AI+vAQQA3gA8vgYQAHgD8PgaQADgDcDjawABgDcAj68BBADeADy+BhAAeAPw+BpAAOANwONrAAGANwCPrwEEAN4APL4GEAB4A/D4GkAA4A3A42sAAYA3AI+vAQQA3gA8vgYQAHgD8PgaQADgDcDjawABgDcAj68BBADeADy+BhAAeAPw+BpAAOANwONrAAGANwCPrwEEAN4APL4GEAB4A/D4GkAA4A3A42sAAYA3AI+vAQQA3gA8vgYQAHgD8PgaQADgDcDjawABgDcAj68BBADeADy+BhAAdAPfj/TYhYAM3rZtP/iu6/r5t23bf+26DtcHLvBj4N/7/b45HA794He7XXM+nwWAshmEAQTgZ9o4A6ThR/jb7fbL/PV6RVpAAB4ICADE/8kAw9Uf0QVAANwCCAxogPGUUWeAVwfAtAXEV9rHQQEYLAjiOUAABKD+nT+9+p2blPBqGGGAAGCz2cyaP+UsgAIghjrlClgEYEpTH3DPcPXHUEsmGN5DgKB6AwjA/1epAGT9aIAP0PqcR0wGmKL/9Peme90C5jS9wHtf6f8x2NETx78KSucDkgWq3gLm7v+5AQivhpEAaIA/+SEBKO1WbgGlhj7kzz0DlAdVrQHe3f9p5wAcAM/2/zR04icBHABlKf7cQTkH4ADQAOMlUCUA+Y9/57wFfHYGqPl9gAC82BNyaGp9LVw9AO+sftInASwAx+NxtPbjP4jmF+EgiAQgH34afA6BAEz9zLSg+0oHwDT81WrVrNfr/skvl0tzv9/7Xw8hIJwDqjPAFABi+HEFADH8dAUEArCg1fzOo0wBYLvdjlZ9/D6u0+kkAO+UvqTvKf0MILaA4cDj2dN2kANAeCNY1RZQWv0x0AAgbQH5NpBvATkANb4QwgEwhCA/BJY+CgrAklz/5FmmGCB925T3AAQD/AOBqz6fLypGJAAAAABJRU5ErkJgggAA";

let pewPewOn = new Image();
pewPewOn.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAA1dJREFUeF7tnDFywjAUBZ2a3hUNV+AWHJMLcQUaCsbU1Ml8h58YBWKbymiXhjAxGb+n1Uo2ST4aH+gGPtDpDd8IABwCARAAeAPw+BpAAOANwONrAAGANwCPrwEEAN4APL4GEAB4A/D4GkAA4A3A42sAAYA3AI+vAQQA3gA8vgYQAHgD8PgaQADgDcDjawABgDcAj68BBADeADy+BhAAeAPw+BpAAOANwONrAAGANwCPrwEEAN4APL4GEAB4A/D4GkAA4A3A42sAAYA3AI+vAQQA3gA8vgYQAHgD8PgaQADgDcDjawABgDcAj68BBADeADy+BhAAeAPw+BpAAOANwONrAAGANwCPrwEEAN4APL4GEAB4A/D4GkAA4A3A42sAAYA3AI+vAQQA3gA8vgYQAHgD8PgaQADgDcDjawABgDcAj68BBADeADy+BhAAeAPw+BpAAOANwONrAAGANwCPrwEEAN4APL4GEAB4A/D4GkAA4A3A42sAAUA38HlLj50IyOBt2/YD33VdP/5t2/bPXdfh+sAFvg345263a/b7fT/w2+22OZ1OAkBZDMIAAvA92jgD5OBH+Mvl8sP8+XxGWkAAbggIAMT/aYDh7I/oAiAALgEEBjTA/Sij9gDPNoC5BMQz7XJQAAYTgrgPEAABqH/lz1u/c5MSbg0jDBAArNfrWeNP2QugAIhBnfIIWARgSlNvcMxw9segjplgeAwBguoNIAD/z1IBKPrRAG+g9TmnmAaYov/8uXmsS8Ccphd47DP93wb27ozjt4Jyf0CyQNVLwNz1vzQA4dYwEgAN8Cs/JABjq5VLwFhDb/J99wDjA1WtAV5d/2n7ABwAj9b/HHTilQAOgHEpfh9B2QfgANAA91OgSgDKj3/n3AV8tAeo+X6AADxZE0poar0tXD0Ar8x+0pUAFoDD4XA39+MPRMsHYSOIBKAc/Bz4EgIBmHrNtKDjxjaAOfhxzb9arX7O/Hg89l8PISDsA6ozwBQAcvCv1+sfCARgQbP5lVOZAsBms2li8PM/hMTreIQFBOCV1hf0nrHPAGIJSAOk9oevafuAqpaAsdkfnCYA8XXsAXIZSCP8B0CNN4RwAJQQpLxiORi7FBSABan+0alMMUC+b8p9gPJDoRoB+AKYBDufzFR7WAAAAABJRU5ErkJgggAA";

let pewPewFire = new Image();
pewPewFire.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAA3FJREFUeF7tnD1uwkAUBk1N74qGK3ALjsmFuAINBTI1NdGzeIlxDLaTxuwMTRLJivi+N55db35WlS90Ayt0esNXAgCHQAAEAN4APL4GEAB4A/D4GkAA4A3A42sAAYA3AI+vAQQA3gA8vgYQAHgD8PgaQADgDcDjawABgDcAj68BBADeADy+BhAAeAPw+BpAAOANwONrAAGANwCPrwEEAN4APL4GEAB4A/D4GkAA4A3A42sAAYA3AI+vAQQA3gA8vgYQAHgD8PgaQADgDcDjawABgDcAj68BBADeADy+BhAAeAPw+BpAAOANwONrAAGANwCPrwEEAN4APL4GEAB4A/D4GkAA4A3A42sAAYA3AI+vAQQA3gA8vgYQAHgD8PgaQADgDcDjawABgDcAj68BBADeADy+BhAAeAPw+BpAAOANwONrAAGANwCPrwEEAN4APL4GEAB4A/D4GkAA4A3A42sAAeA2cK+q+6qq0DcBOjwX/Z/keADoFkADQB9+eAANQBRAhwANQAz/cRdge8AGf2yDWgDIJkQCUNd1O/imadrp13XdfmyaBtcHLvBj4Pf9fl8dDod28LvdrjqfzwJAeS4OAwgAdO3L4Uf86/X6zfzlckFaALcECMCz57EAdO/+qEQDQDYAaQABgO8BBAAIwKv1P5eA+Eh7HETtAd4BQN0HCEBn70PcCCIAyKPfuftcwtEwBoDNZjNr/pS9AAqAGOqUV8AiAFOa+oBrQv9598dQx0zQvYYAQfEGEID3d6kA9PrRAB+g9TlvMQ0wRf/5ffNal4A5TS/w2lf6fwz26R3HbwUN7RVKh6DoJWDu+t83AOFoGAmABviRHxKAsdWKtBFEAqABAAb46/pP2wcUa4A5TwA5dOKTAA6AsfVfA0xtaOHXaYBpAyrSAN3h57P82A+B+nX1Tw5LPRASgBc3igBMM8gir/rvEwBpH1C8AV79EOh4PD7BG38g+m4ZcAlY5L0+/KbGDNAffn6XPgSEE8HiDDC2AczhxzP/er3+Juh0OrWfdyEg7AOQAOTwb7fbLwgE4INUP/RWpxhgu91WMfz8DyHxdbzCAgJQEABDG8BYAtIAqf3u17R9QFFLwNjdH2wnAPF57AFyGUgjvAMgD5VK+oMRHAB9CFJ4sRyMPQoKwMKXhykGyAhTzgGGjpFLOw/4Anj8RZ+X+Ek/AAAAAElFTkSuQmCC";

let pewPewBonkOn = new Image();
pewPewBonkOn.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAB70lEQVR4Ae2ZUW6DMBBEfQr+uQLH4BLc/xREUzF0tFpkoqSqbSYSWhtsy/N21jRNKf6YgAmYgAmYgAmYgAmYwH8Q2EspuJ71maZpx3WI/2kf/fFBQOi2bfu6ricAtHEND4HirwAsyzI2BAM47G8HHGcAa5/xcSVA4YwG8LRDkJlntANGdoC+AvkWYOYZ4YBhXXAHAEA8AgAznkUDGPUc0BLIMs97doAdMOg3QpdA+CbImo/RZ8AoZwAs/82rq38WQjis/M0La3YDwQDsgN8S+PQcYBl1WwKflIPONYBeD0HNIu18N+pcO6AXB2jWkOnYv5v9bG4XLoiCsz5/FY4xG6vAhgCggmrtDEjzfw1mm1ahRxbPn8bVBTfnts2gJkJh1NrZWm2rL6Vkm1aheK5Z1/bNuW0zqIlQGLV2tlbb6u2AegnUsq7Pu3dAFABxuKd1r+2r8YRyzG27ClSEtini3ahrGEAP3wdixt7NeBwf12vb/+EtoJuPwrT20Y7P2dc10B4CQBTPPkVrHA4AxULYPM/nxfsqHu2uAOhm4+YpDEIpnpEg8IzjGLM1my2DbLMUwgiREIyxzPrjADDzBKB9gmLMoHbvAIiiaI2PKAFkFkIJgTETj7F4Tjew37UDKIb2Z+T9GIcFEIVe9Q3gj0vgBfF373uGisLVAAAAAElFTkSuQmCC";

let pewPewBonkOff = new Image();
pewPewBonkOff.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAB+klEQVR4Ae2ZUYrDMAxE/Zcb9L9XyDF6id7/FClTMt1BqDilhbWVKRjJiW08T5Kz2bTmnwmYgAmYgAmYgAmYgAn8B4GttYZ2rt/lctnQdvFPf+/XBwGh9/t9u91uLwDw0cpDoPh3ANZ1rQ3BAPb0dwbsZwBrn/Z0JUDhtAZwtkOQkad1BlTOAH0E8inAyNMiA8pmwREAAHEKAIx4Zg2g6jmgJZBFntecAc6Aom+ELoHwJsiaj9ZnQJUzACn/yzbVPwshHKn8y4Y1p4FgAM6AvxL49hxgGU1bAt+Ug841gFkPQY0i0/mo1bnOgFkyQKOGSMf+0ehnc6fIgig46/OrcLTZWAVWAoAK6vkZkOH/Gsw2rUL3KL4+jWsWHJw7NoOeCIXR87O1xlbfWss2rUJxX6Ou/sG5YzPoiVAYPT9ba2z1zoB+CfSirvenz4AoAOJwTete/XfjCWWfO3YVqAj1KeJTq2sYwAzvAzFin0Y8jo/rjZ3/4Smgm4/CtPbhx/vs6xrwSwCI4tmnaLXlAFDssizb9Xp9Nvi8ruLhTwVANxs3T2EQCsEEQJ8QOI42W3PYMsg2SyG0AIDIUzD7uAaf42izNUsAoGBmBPsUTlsSgKY9s4EZQeG05QBAmEadALL0x9iSAAgBotkY8WjLAohC3/UNIHxoBZBfPgUeCBrsaaebmNcAAAAASUVORK5CYII=";

let explodedSpooder = new Image();
explodedSpooder.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAYAAACO98lFAAABcklEQVR4Ae2SW2rDQBAEdQYfQj85j++S29t0oGBYZlcSJkGEMpjRzmu7S9o2fxKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIIF/SeD5fL4+NcYO4qf7bjP/eDwO4XSmuxym9n1/ndlL/6/Gq0Jqf0xiNKbynDr/CK/9KyN1ZtV3m1oE8yYRP5ol34E5awTAZ/sv98VEN3R0ccx9f20/sxgdYweozuTezPD1dDqu5Lh/OpOGWuwGuhyQEJ8d7OLt1lxq1Ty1zDOHDs5E8jWmtqqnl/vq3PT5zNudDjcFBBIRg2jynFmRvvw5j3HsH+udj6OZcUd7nomqy/M8nvlCqM1iLqU23lV3Io69nM/Ebs9yDkFpmg2fya/EVrNdX9WwEjvTwUz3ZVC7FFcXdQbG5UeGjursW+mg51ZxJpg8MaJnz39h6A1jPrzmNVdyFAAAAABJRU5ErkJggg==";

let smallDeadSpooder = new Image();
smallDeadSpooder.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAohJREFUeF7tVi1PA0EQnRMkeGwNdRgUFZU1/Q2VpAbJTyD8BCSmQfIbaiorisLgqKnFkyCOzLbTTLZ7+3G9NJB5Z+5j53Zn3rw3MxUZvyrj8RMAAAOMIwAJGCcAiiAkAAkYRwASME4AdAFIABIwjgAkYJwA6AKQACRgHAFIwDgB0AUgAUjAOAKQgHECoAtAApCAcQQgAeMEQBeABCAB4whAAsYJgC4ACUAC/xiB6XRaN7k/m82y2J1l1BVGMYfljBzH9T4h+9S6jicLgCbHS519X86jWH59n9FoNNrbxILLOZs3Yt9jtkkAJHh/kxAoIZvFYkEX5z+0mmzCwQ93n5dEg9cerZ62doP7Hl0Px6T3bPIlxdAYCFEASg4MAcLB8/V5uyaSQFPeLsnZ9u8unaVmBL/nZl4f0wqApp9SmZd1CX6f/SFRNaaqnpMrXJzht4+Ne+fv/O3mqlczA3iN5cD/alnksDBUSzoBIFZYNFP4WYL3s+8AeKS6elABTzbE7xy8ACIA6CwyEwSAVJHzAy4GIET9VDHRToUAkIzroCRoufOaY8iSqP+ylYBcpVLQ/sakfFADfOOSOiBVN8aAYwAo0X8uC4IA+JW39GANgKsBu8ouWhe9M+V19gWcEAu0BFJ1VBKhi2YTg6MAlGZfHNN1QBdBXmcQOGix9UHoInjth4CQBUAubVIZ8DuBK4bP68Pfdi3PX9BFULRfwsJQCywGoG32/cP1LOAGHR6Ihts2KC1PDz/8rGeAtoFrFvAerQA49nCtRX7WYPhVnocl/pYahVPs89cl8CQAXdE/5mBoiPLtuwC9lQROAUBp9rqw/1MM6CKg0j2yADh2+Cl16pT2/piuZwN+/gXuovdQEEJPuwAAAABJRU5ErkJgggAA";

let largeDeadSpooder = new Image();
largeDeadSpooder.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABAlJREFUeF7tmaFv20AYxc+oRckUUGlSpK2gtKAgUkGYPRJYWNY/YmjSNGlof0RZYeHIHBZQKaCgNCCqFGlSQbQGtcjTu/jzPl/vfHeOk0nxmdSx73z3ft97d04aiZYfUcv1iwAgOKDlBEIEWm6AsAiGCIQItJxAiEDLDRB2gRCBEIGWEwgRaLkBwi4QIhAi0HICIQItN0DYBUIEQgR2RODo6CjzGerp6Wkn7tzaIKrg4XDoo19MJpNS+20BaRQAF+0r2EaHA2kSRiMASLhOdJqmIkkSmz7tfVNfgtEEiI0BQHxVtSEChy8El34AsSmEjQDYxFNZScxgMHBywnQ6dYa2KYTaAHTin5+f5cQhAGLpr5NqQyPds7rdbqn1JhBqAYD409PTSl1NiKcBXJ718PBQKw7eAHzEu0zc5g4fN9WBsBUANlGl+6tHc/POh/I9tFWvsRaNA7i4uMhub2+js7Oz7P7+PnKpvlYNFwkBuZD089jO6k6IZBKv+9DhAIHmTBpMAxkdgI7UaT6fy9PFYiFs2ZcNlaqm32dGocmXE4H70af1N9Psl5Dj4jOdq53Rx+QEuKDf78sux8fHRVcUUjeJSgCHh4elPtjOtAAsgjHh8XQWZd9EFn39J5RfT36u20gIrJ0JigkCAKjvHC8vL8ILwNXVVfb6+irQEQeB0AJYPcoK8qOoJhMSD06ydDQTEIoDYnGNROMaPtsyIceiWGgacwB8/gcHB+L6+vpNwbUOAADs6ZR/shL225IDIH40E6iqtOudkOckhIvTCSwqntue9AAgh8PPMY4tAvRmiuhi7UKc8e7gDODy8jIj22AxwcS0iyADwK0rq12Re12VpSgh3rgJ12idoH7Jj9hoFNoJ+LwBAC6+ubmxO4BXP47jbLlcysEAAGCKGOTWJ7urVSomS8JGeUzOhZAC2JaWDsfraOSru/w8iQV2iRKYCutjPLI/hBKAXq8nxuOx0QVviOgAQDwGAEkZg49daX1xXrFaq5PN3cKFWvOeg5DOUCDp+gIA7E8LHiB4AzDZnw9I7wOYFCBQlXgbueBh/97RoXsJcolByQG0+lNW+ANUHYBA+y3dA+1dHBRLGgvvJ7qvxer8UVx1NzACoPyT/XXCdBBMAHzhqCJNzzWJp/Y8BlYAaICOcIALALT1gdC0O2ziMZ4KgPTRXAoH+NhfFwdcUyPRtGBueZy7/Bpki0ElgCr7myJB15uGgWrT4SKcz4++GOGaGoMCQB37V1VY/VncFwgX7Fpt03yqYiAB9N6/k9lf/v4jP3NiTdn4f/9jhGviegsAJB6CO51OtlqtvH8saQrWNp6jagIEaN4rkXXABQB1qO1Tn+CAfapmHS3BAXWo7VOf4IB9qmYdLX8BaV7KX9qQ8VcAAAAASUVORK5CYIIA";

let oldSmallDeadSpooder = new Image();
oldSmallDeadSpooder.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACNklEQVR4Ae2U4W2CMQxEOwBLsAMTsQL7i+pQn3SYOAm0P75KVymyY58d+/GpX1/5C4EQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIEQCIFDEbher/fuHGpQhumG9TjamV3pV/lZ72HOG7o/FJeg6y+Xy312zufz0y9aWj2u9BvlRjHpR/HtWPcgcbe1qXJaSkufTqfhud1udx3lpeMuX/Xek7c8tuPXPjs1D807D6J1q+V1tByLrSxaar2f/O3hTfhRXVdUB6o68izAr6/FNRMAFOfOrHwBsqrH0hMdlvjIopFV3u9bfi3yR2oDcjzG8rL8ogDQnXotyF2+4tKxuPfxeXjPY/Rkhtndc0OfBzzZPYaGGlkfHAAsiF6WGFYxAVCN95Dv/VezqI9rqPW3W7+K670t/ElI78MDgC/A61kcq9wMgNeufM3hmnr33JNfhfX+JB5cpHcAWk5LVQAsjfVWIwifzOE17vtbL74L5fv9RdwEVAMELVi/AsU4auEQ/mJ5xvL5t/aoonqn8cryMBBk+QrcOhiPCwi19Fq92eXZAdvpHnEX/fZhNVQPFtGyWoyl5WtprPvU+DzTwSdJemAn0tf/nFPxZlIPc1hMEPCxxNBuDbwxA32wbUkV1Htb+EZCPVfnjXZbUvbAtkVVUO9t4cET7IFtx62Cem8LD55gD+xwXCVdUO/Don8S9F3cZ/xvPsmhS48OvEwAAAAASUVORK5CYII=";

let oldLargeDeadSpooder = new Image();
oldLargeDeadSpooder.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADEUlEQVR4Ae2YUUpkMRBFXYEM86HMNsQluAM//XML7p8ejnCaO0XeS16P3SJUQ6jKS6Vy73npFry7608TaAJNoAk0gSbQBJpAE2gCTaAJNIEm0ASaQBNoAk2gCTSBJtAEmkATaAJN4AsJPDw8nI6MLzz6e1pVs6+vr6cjo+7/HhcHT03RR8yu1Gbvg7KuX664kZH7+/tDbz57bO31vOs7WzgBMSm65pjYMlJrc76yj7MXJF6vZGZeQ5p5eXk5rQzr3b8Xvw3CyLzmMEBu9Pkl0R5GelQgN4fAgTMzKXhWO1tf6XUzCEfMrwhfNb/S6yYQVgDMTOX68/PzaWtkHTl19VnOvxwA3zV+Qp+enj7jpebTYBp5fHw8zcbHx8en6dojjWcuBDXr4fCfgvyhoRljFUCKJd8z6boCrWVuXiN70nTmaFRverD/cmTz29vbP2MLwMww6xzM21QApvK5ea1jLoDMqU/j5misug/fgvf3988mErThCABCFGjUZBqmjjmRQY3Retf2Imf4tdB0xgSQ+vHkOdNIsdS4TjaqABCqSYVprJrL5xpUiOCM1rqevahhnqYzR6N60U4P5ocA8MYTgI32AHCQMBComdUolFF97ZeGa45GtPg7IAA8kU8/+fZpno1oIgRF2ZC5eZrQGHAYrNGX54rneZ2zRq37yalzzyiiTaPqpg5dy7dgBEBjNOEQRGmGtTRsXsW6J42OTOSz7EE+24s2by66gHAYwNb1FwLRWyAEhNWR4tPUtXI0pUYBAIEcMN6OWnee8/azyGt0LoiEA103Xstc7et5xpF5pLqubLzt/hgmAA6lgZtHcQTBQ2usJmbzun9rvmVevezjLOZTABR4A1YA0PQIhC0Tlz6fmUdfBaA/AZ1jvn03svlcsJMg5JYgPG9H0nlJuD7YvAUjAG5ajQq7BozsvarHunyRmwBY8HqsXn8PGMUUfAmQun90xuqz6dfg959fJ4YNk5jP/jdWQ7P5/55X96en6vcuzbOR/77UBj99Xj1Vzz/dX+tvAk2gCTSBJtAEmsBhAn8Bj7Va61yAONgAAAAASUVORK5CYII=";

let healImage = new Image();
healImage.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA/0lEQVR4Ae3WwQ2DMBBEUbqg/wpcjUU5juawh4zWAZkLS34ky9oFHM9zJLJtfBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQAABBO4L9N5HNu6vXGCF4ziGRmvta0S/QIT1LerUFXS2gq7pntn18n2F08nPguja6wDip706z7BK9FdD+3Mlwmab9CBej30fGt73Olu7RM+DeP23ABHcZweKusRpZ5uMAD578Kj9vqiztUv0IsBsPgsez5UIm21S7/UIkc1XAH79b8i+81G9M4AMxXulAXQaCnBnPOpE37iZD+pEkOvMKCjFAAAAAElFTkSuQmCC";

let batteryImage = new Image();
batteryImage.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA3ElEQVR4Ae3RsQ2DMBAFUNeUNFS0DMDODMAQmYANMkBWuOhIg1AAKxWRHtIXBk6y/6MUFwECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAQJ3AOI6xzzAMUZu6XW46dVay7/u4Std1K9RN610fKwH2Jcs8xZrlEeW5RInX557P8xRZepu2beN6p5tOZPltmVyflc9vWXibpmn+FyAPvy1zts7Zo9z0/9Yd66jUt/ellPzb+9RtZOo3gTfg6JkyBdagTgAAAABJRU5ErkJggg==";

let ceilingLight = new Image();
ceilingLight.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA6ElEQVR4Ae3SQQrCMBAF0Jy3x/EMLryGd3IfaaFS4xAtTFOQJwTatEz+f7WUc361lBKtc9IMOjUq3NsbFOu4Y97KTdNU96zgH3Jc0uTJr+J7CvfebTCS4+aOW8q3ZZoCL6Bv+505uakTp4XlbtdLbddcvj7uy5qv2+fzfQcoMXLuqCV0VCbaWwtGz6K99f3cyPnTPr5cVOaXvU3h7cz8xAMmbgvsuR4QzREECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQOBvBJ7sqjgiZlOfkAAAAABJRU5ErkJggg==";

let howToPlayImage = new Image();
howToPlayImage.src = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAFA3PEY8MlBGQUZaVVBfeMiCeG5uePWvuZHI////////////////////////////////////////////////////2wBDAVVaWnhpeOuCguv/////////////////////////////////////////////////////////////////////////wgARCAMwBCADASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAECAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAewAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABzOjGwcDuAAAAAAAQoAAABzOjzU9Dl1Dh1NAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAce3E1049DXk9PmPWcTrfPD0ueDuxsPP6A5DqB5e3nPY8/crlzPRfN0OoHLryJ0x1PN1zTHXl1NnmPRfPD0nlPUA8vqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHHtxMa30OHP1+Q9Xm9HE9Eo8vfz+s4b40z6ZyJ6OHoAHl9XlPUDy+ry+oeX1eU9QHLryOd10PP6aPP15dTcnA68e3I78+lMXjod86AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHHtgnTOh5PXxO3l9WRnFM+iU4Oo15vTgnQAHl9WC3j0OPbXE6cddigcuuDPXGwDhrpxN478Tr5t7Lvn0PM6Q7AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY3k4ehQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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/jqq6WyyyyyvWiVGKDefvDw88oQ0wwEcg088888YwgAAAEMcwMM8888888jL3KsswG+3mi6CCCCCCKl+irhPafqTs8AQcc8M8IMc88888U4wwwwwwwwwo88888ssuDT+eGu+um6eXXue6mahu/KH0zm+GOg88Q4888888888888UgAsJ760888o88888sUkXPHnDziWkYg3/APvl3qHFO9/y9u7v8HFPPPPPPPPPPPPPPPFAAGEMZTPPPKPPPPPPCAF+gw882/ACHKu85y7gIHGm4w8YlrqENPPPPPPPPPPPPPPPAAAAAAAAPPPKPPPPPPACO/jjz69+vPLIv71y7vPPChxwwsPPC6xzzzzzzzzz4fPPPPDDDDAAAEMMMJPPPPPOEKDzss5263tNJosoECksMAGi297/ALIOyhzzzzzzyTSDzzzzzzzzzzzzzzzzTzzzzzzgyytP/wDzCuW+9CGUsMYCXeqK+2PLPf2ss08888880w888888888Bxw88MIA88888888cU/vPPe+AgU4XMU88sAQ0wgYqTzzHeso8888888sss88888888HOayyjAA08888888U87zz3moA888RKwwwwwwwwwAEOPf/u8M08888888888888884wwwwwwwwww0888888YsiDDGwEc8888hzzzz/z/AM88888MMMD86zyyywxxzzz8PPPPKFFOGONFNPPPPPPPPPPHMONMBHPPPPPPPPPPPPPPPPLCJDPGJGOBPFPMGNKKAPPPPPKCFDDDBOFHPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPDCDIAAIKKHPLJPPPPOHPOBLLKPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPAPMPPPPPPPPPPPPPPODPKNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPDPHPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP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";

let pixelFont = new FontFace("Pixel", "url(data:application/octet-stream;base64,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b21qYWNvYnBpZXJjZdJQSUNPLTjTIHdhcyBidWlsdCB3aXRoIEZvbnRTdHJ1Y3QKaHR0cDovL3d3dy5mb250c2hvcC5jb21odHRwOi8vZm9udHN0cnVjdC5jb20vZm9udHN0cnVjdGlvbnMvc2hvdy8xMzAzMDk5Q3JlYXRpdmUgQ29tbW9ucyBBdHRyaWJ1dGlvbiBOb24tY29tbWVyY2lhbCBTaGFyZSBBbGlrZWh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzMuMC9GaXZlIGJpZyBxdWFja2luZyB6ZXBoeXJzIGpvbHQgbXkgd2F4IGJlZEF3b0lkbGx0Vnc9PQBDAG8AcAB5AHIAaQBnAGgAdAAgAGoAYQBjAG8AYgBwAGkAZQByAGMAZQAgADIAMAAxADYAUABJAEMATwAtADgAUgBlAGcAdQBsAGEAcgBGAG8AbgB0AFMAdAByAHUAYwB0ACAAUABJAEMATwAtADgAUABJAEMATwAtADgAIABSAGUAZwB1AGwAYQByAFYAZQByAHMAaQBvAG4AIAAxAC4AMABQAEkAQwBPAC0AOABGAG8AbgB0AFMAdAByAHUAYwB0ACAAaQBzACAAYQAgAHQAcgBhAGQAZQBtAGEAcgBrACAAbwBmACAARgBTAEkAIABGAG8AbgB0AFMAaABvAHAAIABJAG4AdABlAHIAbgBhAHQAaQBvAG4AYQBsACAARwBtAGIASABoAHQAdABwADoALwAvAGYAbwBuAHQAcwB0AHIAdQBjAHQALgBjAG8AbQBqAGEAYwBvAGIAcABpAGUAcgBjAGUgHABQAEkAQwBPAC0AOCAdACAAdwBhAHMAIABiAHUAaQBsAHQAIAB3AGkAdABoACAARgBvAG4AdABTAHQAcgB1AGMAdAAKAGgAdAB0AHAAOgAvAC8AdwB3AHcALgBmAG8AbgB0AHMAaABvAHAALgBjAG8AbQBoAHQAdABwADoALwAvAGYAbwBuAHQAcwB0AHIAdQBjAHQALgBjAG8AbQAvAGYAbwBuAHQAcwB0AHIAdQBjAHQAaQBvAG4AcwAvAHMAaABvAHcALwAxADMAMAAzADAAOQA5AEMAcgBlAGEAdABpAHYAZQAgAEMAbwBtAG0AbwBuAHMAIABBAHQAdAByAGkAYgB1AHQAaQBvAG4AIABOAG8AbgAtAGMAbwBtAG0AZQByAGMAaQBhAGwAIABTAGgAYQByAGUAIABBAGwAaQBrAGUAaAB0AHQAcAA6AC8ALwBjAHIAZQBhAHQAaQB2AGUAYwBvAG0AbQBvAG4AcwAuAG8AcgBnAC8AbABpAGMAZQBuAHMAZQBzAC8AYgB5AC0AbgBjAC0AcwBhAC8AMwAuADAALwBGAGkAdgBlACAAYgBpAGcAIABxAHUAYQBjAGsAaQBuAGcAIAB6AGUAcABoAHkAcgBzACAAagBvAGwAdAAgAG0AeQAgAHcAYQB4ACAAYgBlAGQAQQB3AG8ASQBkAGwAbAB0AFYAdwA9AD0AAAIJmQGQAAUABAgACAAAAAAACAAIAAAACAAAzAMzAAAAAAQAAAAAAAAAgAAAAQAAAAAAAAAAAAAAAEZTVFIAQAAgIB0QAAAAAAAQAAAAAAAAAQAAAAAQABAAAAAAIAAAAAMAAAAAAAABmQDMAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAQABAAAAMABwALABIAFgAAAQEBAQEBAQEBAQEBAQEBAAEAAQEBAQEIAAAA/XQAAAUXAAD66QAAAowAAP10AAAFFwAA/XX+8f9E/z8AAPqMAAAQAAAAAkUCiwAA/XUC+gKLAAD9dQL2AosAAP11AvoChwAAAAD/Q/9A/vb00RAAAADwAAAAAAACAzMAAAZmEAAAAwAHAAABAQEBAQEBAQMzAAADMwAA/M0AAAMzAAAAAAMzAAD8zQZmCZoAAPZmAAIAAAmZCZkQAAADAAcAAAEBAQEBAQEBAAAAAAMzAAADMwAAAzMAAAmZBmcAAPmZAAAGZwAA+ZkAAgAAAAAJmRAAAAMADwAAAQEBAQEBAQEBAQEBAQEBAQZmAAD8zQAA/M0AAAMzAAADMwAAAzMAAPzNAAD8zQAABmYDMwAA/M35mhAAAAD8zAAAAzQAAPAAAAADMwAA/M0AAQAAAAAJmRAAAA8AAAEBAQEBAQEBAQEBAQEBAQEDMwAA/M0AAAMzAAD8zQAACZkAAPzNAAADMwAA/M0AAAAAAzMAAAMzAAADMwAABmcAAPzMAAD8zQAA+ZoAAPzNAAAABQAAAAAJmRAAAAMABwALAA8AEwAAAQEBAQEBAQEBAQEBAQEBAQEBAQEGZgAAAzMAAPZnAAADMwAAAAAAAAMzAAD5mgAAAzMAAAMzAAADMwAAAAADMwAA/M0AAAZmAAD5mgZmAzMAAPzNBmYDNAAA/Mz8zQZnAAD5mQAAAAEAAAAACZkQAAAJAAABAQEBAQEBAQEBAAAAAAZmAAD8zQAAAzMAAAMzAAAAABAAAAD2ZgAA/M0AAAMzAAD5mgACAAAJmQZmEAAAAwAHAAABAQEBAQEBAQAAAAADMwAAAAAAAAMzAAAJmQMzAAD8zQMzAzQAAPzMAAMAAAAABmYQAAADAAcACwAAAQEBAQEBAQEBAQEBAzMAAAMzAAD5mgAAAzMAAAAAAAADMwAAAAADMwAA/M0DMwmZAAD2ZwmZAzQAAPzMAAAAAwMzAAAJmRAAAAMABwALAAABAQEBAQEBAQEBAQEDMwAAAzMAAAAAAAADMwAA+ZoAAAMzAAAAAAMzAAD8zQMzCZkAAPZnCZkDNAAA/MwAAAAFAAAAAAmZEAAAAwAHABMAFwAbAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAAMzAAADMwAAAzMAAPmaAAD8zQAAAzMAAAMzAAADMwAA/M0AAPmaAAADMwAAAzMAAAMzAAAAAAMzAAD8zQAAAzMAAPzNAzMDMwAAAzMAAAMzAAD8zQAA/M0AAPzNCZkDNAAA/MwAAAM0AAD8zAAAAAEAAAMzCZkMzAALAAABAQEBAQEBAQEBAQEDMwAA/M0AAAMzAAADMwAAAzMAAPzNAAADMwMzAAADMwAAAzMAAPzNAAD8zQAA/M0AAAACAAAAAAZmBmYAAwAHAAABAQEBAQEBAQAAAAADMwAAAAAAAAMzAAAAAAMzAAD8zQMzAzMAAPzNAAEAAAZmCZkJmQADAAABAQEBAAAAAAmZAAAGZgMzAAD8zQAAAAEDMwAABmYDMwADAAABAQEBAzMAAAMzAAAAAAMzAAD8zQAAAAMAAAAACZkQAAADAAcACwAAAQEBAQEBAQEBAQEBAAAAAAMzAAAAAAAAAzMAAAAAAAADMwAAAAADMwAA/M0DMwmZAAD2ZwmZAzQAAPzMAAAAAgAAAAAJmRAAAAMABwAAAQEBAQEBAQEGZgAA/M0AAPzNAAAJmQAAAzMJmQAA9mf8zRAAAADwAAABAAAAAAmZEAAACQAAAQEBAQEBAQEBAQAAAAADMwAA/M0AAAZmAAADMwAAAAADMwAACZkAAAM0AADzMwAA/M0AAQAAAAAJmRAAAAsAAAEBAQEBAQEBAQEBAQAAAAAGZgAA+ZoAAAmZAAD5mgAABmYAAAAACZkAAAMzAAADNAAA9mYAAPzNAAD8zQAAAAEAAAAACZkQAAALAAABAQEBAQEBAQEBAQEAAAAABmYAAPzNAAADMwAA+ZoAAAmZAAAAAAMzAAADMwAAAzMAAAMzAAADNAAA8AAAAAABAAAAAAmZEAAACQAAAQEBAQEBAQEBAQZmAAD5mgAAAzMAAAMzAAADMwAAAAAGZgAACZoAAPmZAAAGZwAA8AAAAQAAAAAJmRAAAAsAAAEBAQEBAQEBAQEBAQAAAAAGZgAA+ZoAAAmZAAD5mgAABmYAAAAAAzMAAAMzAAAJmgAA/MwAAPzNAAD2ZwAAAAIAAAAACZkQAAADAAkAAAEBAQEBAQEBAQEGZgAA/M0AAPzNAAADMwAABmYAAAMzAzMAAPzN/M0QAAAA+ZkAAPZnAAAAAQAAAAAJmRAAAAUAAAEBAQEBAQZmAAD5mgAACZkAAAAADMwAAAM0AADwAAADAAAAAAmZEAAAAwAHAAsAAAEBAQEBAQEBAQEBAQZmAAD8zQAAAzMAAPzNAAD8zQAACZkAAAMzAzMAAPzNBmYDMwAA/M32ZxAAAADwAAAAAAIAAAAACZkQAAADAAkAAAEBAQEBAQEBAQEGZgAA/M0AAAMzAAD5mgAACZkAAAmZAzMAAPzN9mcGZgAACZoAAPAAAAAAAgMzAzMGZgzMAAMABwAAAQEBAQEBAQEDMwAAAzMAAPzNAAADMwAAAzMDMwAA/M0GZgMzAAD8zQADAAAAAAZmDMwAAwAHAAsAAAEBAQEBAQEBAQEBAQAAAAADMwAAAAAAAAMzAAD8zQAAAzMAAAAAAzMAAPzNAzMDMwAA/M0GZgMzAAD8zQAAAAUAAAAACZkQAAADAAcACwAPABMAAAEBAQEBAQEBAQEBAQEBAQEBAQEBBmYAAAMzAAD5mgAAAzMAAPmaAAADMwAAAAAAAAMzAAAAAAAAAzMAAAAAAzMAAPzNAzMDMwAA/M0DMwMzAAD8zQMzAzMAAPzNAzMDNAAA/MwAAAACAAADMwmZDMwAAwAHAAABAQEBAQEBAQAAAAAJmQAA9mcAAAmZAAADMwMzAAD8zQZmAzMAAPzNAAUAAAAACZkQAAADAAcACwAPABMAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAAMzAAAAAAAAAzMAAAAAAAADMwAA+ZoAAAMzAAD5mgAAAzMAAAAAAzMAAPzNAzMDMwAA/M0DMwMzAAD8zQMzAzMAAPzNAzMDNAAA/MwAAAACAAAAAAmZEAAAAwALAAABAQEBAQEBAQEBAQEDMwAAAzMAAPzNAAADMwAA+ZoAAAmZAAAAAAMzAAD8zQZmAzMAAAMzAAADNAAA9mYABAAAAAAJmRAAAAMABwALAA8AAAEBAQEBAQEBAQEBAQEBAQEDMwAABmYAAPZnAAADMwAAAzMAAAMzAAD5mgAAAzMAAAAAAzMAAPzNAzMJmQAA9mcDMwZmAAD5mgZmAzQAAPzMAAIAAAAACZkQAAADAAsAAAEBAQEBAQEBAQEBAQZmAAD8zQAA/M0AAAmZAAD8zQAA/M0AAAmZAzMAAPzN9mcQAAAA8AAAAAZmAAD5mgABAAAAAAmZEAAADwAAAQEBAQEBAQEBAQEBAQEBAQAAAAAJmQAA/M0AAPzNAAADMwAA/M0AAAMzAAADMwAAAAAQAAAA+ZkAAAMzAAD8zQAA/M0AAPzNAAADMwAA+ZoAAAADAAAAAAmZEAAAAwAHAAsAAAEBAQEBAQEBAQEBAQMzAAAGZgAA9mcAAAMzAAAAAAAABmYAAAAAAzMAAPzNAzMJmQAA9mcJmQM0AAD8zAAAAAIAAAAAFmYQAAAHABMAAAEBAQEBAQEBAQEBAQEBAQEBAQEBDMwAAAM0AAD2ZgAAAzMAAPmaAAD8zQAAAzMAABAAAAADMwAA/M0AAAMzAzMAAAZmAAD5mgAA/M38zQMzAAAJmQAAAzQAAPzMAAD2ZwAA/M0AAQAAAAAJmRAAAAsAAAEBAQEBAQEBAQEBAQAAAAAJmQAA+ZoAAAMzAAD8zQAABmYAAAAAEAAAAPzMAAD8zQAA/M0AAPzNAAD8zQAAAAEAAAAACZkQAAAJAAABAQEBAQEBAQEBAAAAAAmZAAD5mgAAAzMAAPzNAAAAABAAAAD8zAAA/M0AAPzNAAD5mgACAAAAAAmZEAAABwALAAABAQEBAQEBAQEBAQEAAAAAAzMAAAMzAAADMwAA+ZoAAAZmAAAAAAzMAAD2ZwAAAzMAAPmaDMwDNAAA/MwAAQAAAAAJmRAAAAsAAAEBAQEBAQEBAQEBAQAAAAADMwAAAzMAAAMzAAD8zQAA/M0AAAAAEAAAAPmZAAAGZwAA8AAAAAZmAAD5mgAAAAEAAAAACZkQAAALAAABAQEBAQEBAQEBAQEAAAAAAzMAAPzNAAAJmQAA/M0AAAMzAAAAAAMzAAAJmQAAAzQAAPzMAAD2ZwAA/M0AAAABAAAAAAmZEAAACQAAAQEBAQEBAQEBAQAAAAADMwAA/M0AAAmZAAD8zQAAAAADMwAACZkAAAM0AAD8zAAA8zQAAwAAAAAJmRAAAAMACwAPAAABAQEBAQEBAQEBAQEBAQEBBmYAAAMzAAD2ZwAAAzMAAAMzAAD8zQAAAzMAAAMzAAAAAAZmAAD5mgAAEAAAAPmZAAD8zQAA+ZoJmQZnAAD5mQAAAAIAAAAAFmYQAAAHABMAAAEBAQEBAQEBAQEBAQEBAQEBAQEBEAAAAPmZAAD8zQAAAzMAAPmaAAD8zQAAAzMAABAAAAADMwAA/M0AAAMzCZkAAPzNAAD8zQAA/M38zQMzAAAJmQAAAzQAAPzMAAD2ZwAA/M0AAQAAAAAJmRAAAAcAAAEBAQEBAQEBAAAAAAmZAAD8zQAA/M0AAAAAEAAAAPAAAAAJmQAA9mcAAAACAAAAAAmZEAAAAwAJAAABAQEBAQEBAQEBBmYAAAMzAAD2ZwAABmYAAPzNAAAAAAzMAADzNAAAEAAAAPzMAADzNAAAAAMAAAAAFmYQAAADAAcAEwAAAQEBAQEBAQEBAQEBAQEBAQEBAQEJmQAAAzMAAAM0AAD2ZgAA/M0AAPzNAAADMwAAEAAAAAMzAAD8zQAABmYDMwAA/M38zQmZAAD2Z/zNAzMAAAmZAAADNAAA/MwAAPZnAAD8zQAAAAIAAAAACZkQAAADAAkAAAEBAQEBAQEBAQEGZgAA/M0AAPzNAAAJmQAA+ZoAAAmZAzMAAPzN9mcQAAAA9mYAAPmaAAAAAwAAAAAJmRAAAAkADQARAAABAQEBAQEBAQEBAQEBAQEBAQEDMwAA/M0AAAMzAAADMwAAAzMAAPzNAAADMwAA+ZoAAAMzAAAAAAMzAAAJmQAA+ZoAAPzNAAD8zQZmBmYAAPmaBmYDNAAA/MwAAgAAAAAWZhAAAAcAEwAAAQEBAQEBAQEBAQEBAQEBAQEBAQEMzAAAAzQAAPzMAAD5mgAA/M0AAPzNAAADMwAAEAAAAAMzAAD8zQAAAzMDMwAAAzMAAAMzAAD2Z/zNAzMAAAmZAAADNAAA/MwAAPZnAAD8zQADAAAAAAmZEAAAAwALAA8AAAEBAQEBAQEBAQEBAQEBAQEAAAAABmYAAAAAAAD5mgAAAzMAAAZmAAD5mgAABmYAAAAAAzMAAPzNAzMDMwAABmYAAPzNAAD5mgmZAzQAAPzMAAAAAQAAAAAJmRAAAAcAAAEBAQEBAQEBAzMAAPzNAAAJmQAA/M0AAAAADMwAAAM0AAD8zAAA8zQAAAACAAAAABZmEAAABwATAAABAQEBAQEBAQEBAQEBAQEBAQEBARAAAAD8zAAA/M0AAPzNAAD8zQAA/M0AAAMzAAAQAAAAAzMAAPzNAAADMwZmAAADMwAA/M0AAPma/M0DMwAACZkAAAM0AAD8zAAA9mcAAPzNAAEAAAAACZkQAAALAAABAQEBAQEBAQEBAQEDMwAA/M0AAAMzAAADMwAAAzMAAPzNAAAAAAMzAAAMzQAA9mYAAAmaAADzMwAA/M0AAAABAAAAAAmZEAAABwAAAQEBAQEBAQEAAAAAAzMAAAMzAAADMwAAAAAQAAAA9mYAAAmaAADwAAAAAAIAAAAAFmYQAAATAB8AAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBEAAAAPzMAAADNAAA/MwAAPzNAAD8zQAAAzMAAPzNAAADMwAAAzMAAPZnAAD8zQAAAzMAABAAAAADMwAA/M0AAAMzAzMAAAMzAAADMwAA/M0AAAMzAAD8zQAA/M0AAPzNAAADMwAA/M38zQMzAAAJmQAAAzQAAPzMAAD2ZwAA/M0AAQAAAAAJmRAAAAsAAAEBAQEBAQEBAQEBAQAAAAAGZgAA+ZoAAAMzAAADMwAAAzMAAAAAAzMAAAMzAAAJmgAA+ZkAAAZnAADwAAAAAAMAAAAACZkQAAAFAAkADwAAAQEBAQEBAQEBAQEBAQEBAQAAAAADMwAABmYAAPmaAAADMwAAAAAAAPmaAAAJmQAAAAAGZgAA/M0AAPzNBmYDMwAA/M0DMwMzAAADNAAA+ZkAAAABAAAAAAZmEAAABwAAAQEBAQEBAQEAAAAABmYAAPzNAAADMwAAAAAQAAAA/MwAAPZnAAD8zQAAAAMAAAAACZkQAAADAAcACwAAAQEBAQEBAQEBAQEBBmYAAAMzAAD5mgAAAzMAAPmaAAADMwAAAAADMwAA/M0DMwmZAAD2ZwmZAzQAAPzMAAAAAQMzAAAJmRAAAAcAAAEBAQEBAQEBAzMAAAMzAAD8zQAABmYAAAAAAzMAAAmZAAADNAAA8AAAAAADAAAJmQmZEAAAAwAHAAsAAAEBAQEBAQEBAQEBAQAAAAADMwAAAzMAAAMzAAD5mgAAAzMAAAmZAzMAAPzNAAADMwAA/M0DMwM0AAD8zAAAAAEAAAAACZkDMwADAAABAQEBAAAAAAmZAAAAAAMzAAD8zQAAAAIDMwmZCZkQAAADAAcAAAEBAQEBAQEBBmYAAAMzAAD5mgAAAzMAAAmZAzMAAPzNAzMDNAAA/MwAAgAAAAAJmRAAAAMACwAAAQEBAQEBAQEBAQEBBmYAAPzNAAD8zQAACZkAAPzNAAD8zQAACZkDMwAA/M32ZxAAAADwAAAABmYAAPmaAAEAAAAACZkQAAAPAAABAQEBAQEBAQEBAQEBAQEBAAAAAAmZAAD8zQAA/M0AAAMzAAD8zQAAAzMAAAMzAAAAABAAAAD5mQAAAzMAAPzNAAD8zQAA/M0AAAMzAAD5mgAAAAMAAAAACZkQAAADAAcACwAAAQEBAQEBAQEBAQEBAzMAAAZmAAD2ZwAAAzMAAAAAAAAGZgAAAAADMwAA/M0DMwmZAAD2ZwmZAzQAAPzMAAAAAQAAAAAJmRAAAAkAAAEBAQEBAQEBAQEAAAAABmYAAPzNAAADMwAAAzMAAAAAEAAAAPzMAAD2ZwAACZkAAPM0AAEAAAAACZkQAAALAAABAQEBAQEBAQEBAQEAAAAACZkAAPmaAAADMwAA/M0AAAZmAAAAABAAAAD8zAAA/M0AAPzNAAD8zQAA/M0AAAABAAAAAAmZEAAACQAAAQEBAQEBAQEBAQAAAAAJmQAA+ZoAAAMzAAD8zQAAAAAQAAAA/MwAAPzNAAD8zQAA+ZoAAgAAAAAJmRAAAAcACwAAAQEBAQEBAQEBAQEBAAAAAAMzAAADMwAAAzMAAPmaAAAGZgAAAAAMzAAA9mcAAAMzAAD5mgzMAzQAAPzMAAEAAAAACZkQAAALAAABAQEBAQEBAQEBAQEAAAAAAzMAAAMzAAADMwAA/M0AAPzNAAAAABAAAAD5mQAABmcAAPAAAAAGZgAA+ZoAAAABAAAAAAmZEAAACwAAAQEBAQEBAQEBAQEBAAAAAAMzAAD8zQAACZkAAPzNAAADMwAAAAADMwAACZkAAAM0AAD8zAAA9mcAAPzNAAAAAQAAAAAJmRAAAAkAAAEBAQEBAQEBAQEAAAAAAzMAAPzNAAAJmQAA/M0AAAAAAzMAAAmZAAADNAAA/MwAAPM0AAMAAAAACZkQAAADAAsADwAAAQEBAQEBAQEBAQEBAQEBAQZmAAADMwAA9mcAAAMzAAADMwAA/M0AAAMzAAADMwAAAAAGZgAA+ZoAABAAAAD5mQAA/M0AAPmaCZkGZwAA+ZkAAAABAAAAAAmZEAAABQAAAQEBAQEBAAAAAAMzAAAGZgAAAAAQAAAA8zMAAPzNAAEAAAAACZkQAAAHAAABAQEBAQEBAQAAAAAJmQAA/M0AAPzNAAAAABAAAADwAAAACZkAAPZnAAAAAgAAAAAJmRAAAAMACQAAAQEBAQEBAQEBAQZmAAADMwAA9mcAAAZmAAD8zQAAAAAMzAAA8zQAABAAAAD8zAAA8zQAAAACAAAAAAmZEAAABQALAAABAQEBAQEBAQEBAQEAAAAAAzMAAAMzAAAAAAAA/M0AAAZmAAAAAAzMAAD2ZwAA/M0DMwmZAAADNAAA8zMAAgAAAAAJmRAAAAMACQAAAQEBAQEBAQEBAQZmAAD8zQAA/M0AAAmZAAD5mgAACZkDMwAA/M32ZxAAAAD2ZgAA+ZoAAAADAAAAAAmZEAAACQANABEAAAEBAQEBAQEBAQEBAQEBAQEBAQMzAAD8zQAAAzMAAAMzAAADMwAA/M0AAAMzAAD5mgAAAzMAAAAAAzMAAAmZAAD5mgAA/M0AAPzNBmYGZgAA+ZoGZgM0AAD8zAACAAAAAAmZEAAAAwAPAAABAQEBAQEBAQEBAQEBAQEBBmYAAAMzAAD2ZwAACZkAAPzNAAD8zQAAAzMAAPzNAAAAAAZmAAD5mgAAEAAAAPmZAAADMwAA/M0AAPzNAAD5mgADAAAAAAmZEAAAAwALAA8AAAEBAQEBAQEBAQEBAQEBAQEAAAAABmYAAAAAAAD5mgAAAzMAAAZmAAD5mgAABmYAAAAAAzMAAPzNAzMDMwAABmYAAPzNAAD5mgmZAzQAAPzMAAAAAQAAAAAJmRAAAAcAAAEBAQEBAQEBAzMAAPzNAAAJmQAA/M0AAAAADMwAAAM0AAD8zAAA8zQAAAACAAAAAAmZEAAAAwAJAAABAQEBAQEBAQEBAAAAAAMzAAAAAAAAAzMAAAMzAAADMwzNAADzM/zNAzMAAAzNAADwAAAAAAEAAAAACZkQAAALAAABAQEBAQEBAQEBAQEDMwAA/M0AAAMzAAADMwAAAzMAAPzNAAAAAAMzAAAMzQAA9mYAAAmaAADzMwAA/M0AAAABAAAAAAmZEAAABwAAAQEBAQEBAQEAAAAAAzMAAAMzAAADMwAAAAAQAAAA9mYAAAmaAADwAAAAAAUAAAAACZkQAAADAAcACwAPABMAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAAMzAAADMwAAAzMAAPmaAAADMwAA+ZoAAAMzAAADMwAAAzMAAAAABmYAAPmaAAAGZgAA+ZoGZgMzAAD8zQMzBmcAAPmZAAAGZwAA+ZkAAAABAAAAAAmZEAAACwAAAQEBAQEBAQEBAQEBAAAAAAZmAAD5mgAAAzMAAAMzAAADMwAAAAADMwAAAzMAAAmaAAD5mQAABmcAAPAAAAAAAwAAAAAJmRAAAAUACQAPAAABAQEBAQEBAQEBAQEBAQEBAAAAAAMzAAAGZgAA+ZoAAAMzAAAAAAAA+ZoAAAmZAAAAAAZmAAD8zQAA/M0GZgMzAAD8zQMzAzMAAAM0AAD5mQAAAAEAAAAACZkQAAALAAABAQEBAQEBAQEBAQEDMwAA/M0AAAMzAAAGZgAA/M0AAAMzAAAAAAZmAAADMwAABmcAAPzMAAD2ZwAA/M0AAAABAzMAAAZmEAAAAwAAAQEBAQMzAAADMwAAAAAQAAAA8AAAAAABAAAAAAmZEAAACwAAAQEBAQEBAQEBAQEBAAAAAAMzAAD8zQAABmYAAAMzAAD8zQAAAAADMwAACZkAAAM0AAD5mQAA/M0AAPmaAAAAAQAAAzMJmQzMAAcAAAEBAQEBAQEBAAAAAAZmAAADMwAA+ZoAAAMzBmYAAAMzAAD5mgAA/M0AAAACAAAJmQZmEAAAAwAHAAABAQEBAQEBAQAAAAADMwAAAAAAAAMzAAAJmQMzAAD8zQMzAzQAAPzMAAIAAAmZBmYQAAADAAcAAAEBAQEBAQEBAAAAAAMzAAAAAAAAAzMAAAmZAzMAAPzNAzMDNAAA/MwAAgAACZkJmRAAAAMABwAAAQEBAQEBAQEAAAAAAzMAAAMzAAADMwAACZkGZwAA+ZkAAAZnAAD5mQACAAAJmQmZEAAAAwAHAAABAQEBAQEBAQAAAAADMwAAAzMAAAMzAAAJmQZnAAD5mQAABmcAAPmZAAAAAAAAAIwAAACMAAAAjAAAAIwAAADEAAAA/AAAAVwAAAG8AAACOAAAAngAAAKwAAADAAAAA1AAAAP0AAAEQAAABHgAAAScAAAEwAAABRAAAAVIAAAFiAAABdQAAAYgAAAGYAAABqwAAAbwAAAHHAAAB2wAAAewAAAH6AAACDgAAAi0AAAI7AAACWgAAAm0AAAKGAAACmQAAArEAAALFAAAC4gAAAvUAAAMFAAADGAAAAysAAAM+AAADTgAAA2cAAAOEAAADkgAAA6MAAAPBAAAD0gAAA+0AAAQKAAAEIwAABDEAAAROAAAEYQAABG8AAASbAAAErgAABMcAAATVAAAE6QAABPcAAAULAAAFFAAABSIAAAU1AAAFTQAABWEAAAVxAAAFhAAABZQAAAWnAAAFugAABc0AAAXdAAAF9gAABgEAAAYPAAAGIAAABjMAAAZEAAAGXwAABncAAAaQAAAGngAABq8AAAbCAAAG0AAABu8AAAcCAAAHGwAABy4AAAc3AAAHSgAAB1gAAAdmAAAHdAAAB4IAAAeQA==)");
// Add the font to the document's font loading queue
pixelFont.load().then(function(loadedFont) {
    // After loading, add the font to the document
    document.fonts.add(loadedFont);
    document.body.style.fontFamily = 'Pixel, sans-serif';
});

let bkgTrack1 = new Audio("Audio/TBD - Loop1-old.mp3");
bkgTrack1.volume = 0.5;

let killSFX = new Audio("Audio/kill.wav");
killSFX.volume = 0.5;

let enemyHurtSFX = new Audio("Audio/prick.wav");
enemyHurtSFX.volume = 0.5;

let dieSFX = new Audio("Audio/die.wav");
dieSFX.volume = 1;

let doorSFX = new Audio("Audio/bonk.wav");
doorSFX.volume = 1;

let itemSFX = new Audio("Audio/key.wav");
itemSFX.volume = 0.5;

let enemyShootSFX = new Audio("Audio/shoot.wav");
enemyShootSFX.volume = 0.5;

let flamethrowerSFX = new Audio("Audio/fwoop.wav");
flamethrowerSFX.volume = 0.75;

let boomSFX = new Audio("Audio/boom.wav");
boomSFX.volume = 1;

const ENTITY_TYPES = Object.freeze({
    SMALL_MELEE: 0,
    SMALL_RANGED: 1,
    LARGE_RANGED: 2,
    FLAMETHROWER: 3,
    HELICOPTER: 4,
    FLAME: 7,
    ENEMY_BULLET: 8,
    BULLET: 9,
    TEXTURED_LIGHT: 16,
    LIGHT: 17,
    BATTERY: 18,
    HEAL: 19
});

function createEntity(x, y, type, velocity = {x: 0, y: 0}, doorId, light) {
    if (type == ENTITY_TYPES.SMALL_MELEE) {
        return {
            isLight: false,
            // light: {
            //     r: 0,
            //     g: 255,
            //     b: 255
            // },
            isRendered: false,
            doorId: doorId,
            type: type,
            radius: 275,
            x: x,
            y: y,
            image: melee1,
            width: 350,
            height: 350,
            moveSpeed: 0.0006,
            hp: 3,
            distanceToPlayer: null,
            canSeePlayer: false,
            animation: {
                currentFrame: 0,
                frameIncrement: 0.01,
                frameList: [
                    melee1,
                    melee2,
                    melee3
                ]
            },
            defaultFrame: melee1,
            alive: true,
            deadFrame: smallDeadSpooder,
            oldDeadFrame: oldSmallDeadSpooder,
            damage: 1,
            laserTime: 0
        };
    } else if (type == ENTITY_TYPES.SMALL_RANGED) {
        return {
            isLight: false,
            isRendered: false,
            doorId: doorId,
            type: type,
            radius: 275,
            x: x,
            y: y,
            image: ranged1,
            width: 350,
            height: 350,
            moveSpeed: 0.0006,
            hp: 3,
            distanceToPlayer: null,
            canSeePlayer: false,
            animation: {
                currentFrame: 0,
                frameIncrement: 0.01,
                frameList: [
                    ranged1,
                    ranged2,
                    ranged3
                ]
            },
            defaultFrame: ranged1,
            shootCooldown: 1000,
            shootTimer: 0.0,
            projectileSpread: 2,
            alive: true,
            deadFrame: smallDeadSpooder,
            oldDeadFrame: oldSmallDeadSpooder,
            damage: 1,
            laserTime: 0
        };
    } else if (type == ENTITY_TYPES.LARGE_RANGED) {
        return {
            isLight: false,
            isRendered: false,
            doorId: doorId,
            type: type,
            radius: 550,
            x: x,
            y: y,
            image: largeRanged1,
            width: 600,
            height: 600,
            moveSpeed: 0.0006,
            hp: 10,
            distanceToPlayer: null,
            canSeePlayer: false,
            animation: {
                currentFrame: 0,
                frameIncrement: 0.01,
                frameList: [
                    largeRanged1,
                    largeRanged2,
                    largeRanged3
                ]
            },
            defaultFrame: largeRanged1,
            shootCooldown: 1000,
            shootTimer: 0.0,
            projectileSpread: 2,
            alive: true,
            deadFrame: largeDeadSpooder,
            oldDeadFrame: oldLargeDeadSpooder,
            damage: 1,
            laserTime: 0
        };
    } else if (type == ENTITY_TYPES.FLAMETHROWER) {
        return {
            isLight: false,
            isRendered: false,
            doorId: doorId,
            type: type,
            radius: 275,
            x: x,
            y: y,
            image: flamethrower1,
            width: 350,
            height: 350,
            moveSpeed: 0.0006,
            hp: 4,
            distanceToPlayer: null,
            canSeePlayer: false,
            animation: {
                currentFrame: 0,
                frameIncrement: 0.01,
                frameList: [
                    flamethrower1,
                    flamethrower2,
                    flamethrower3
                ]
            },
            defaultFrame: flamethrower1,
            shootCooldown: 150,
            shootTimer: 0.0,
            projectileSpread: 1.25,
            projectileCount: 7,
            alive: true,
            deadFrame: smallDeadSpooder,
            oldDeadFrame: oldSmallDeadSpooder,
            damage: 1,
            laserTime: 0
        };
    } else if (type == ENTITY_TYPES.HELICOPTER) {
        return {
            isLight: false,
            isRendered: false,
            doorId: doorId,
            type: type,
            radius: 175,
            x: x,
            y: y,
            image: helicopter1,
            width: 300,
            height: 300,
            moveSpeed: 0.0006,
            acceleration: 0.12,
            hp: 2,
            distanceToPlayer: null,
            canSeePlayer: false,
            animation: {
                currentFrame: 0,
                frameIncrement: 0,
                frameList: [
                    helicopter1
                ]
            },
            defaultFrame: helicopter1,
            shootCooldown: 150,
            shootTimer: 0.0,
            alive: true,
            deadFrame: explodedSpooder,
            oldDeadFrame: explodedSpooder,
            damage: 1,
            laserTime: 0,
            velocity: { x: 0, y: 0 }
        };
    } else if (type == ENTITY_TYPES.BULLET) {
        return {
            isLight: false,
            // light: {
            //     r: 10,
            //     g: 0,
            //     b: 0
            // },
            isRendered: false,
            type: type,
            radius: 0.1,
            x: x,
            y: y,
            image: bullet1,
            width: 5,
            height: 160,
            moveSpeed: 0.001,
            distanceToPlayer: null,
            canSeePlayer: false,
            animation: {
                currentFrame: 0,
                frameIncrement: 0,
                frameList: [
                    bullet1
                ]
            },
            defaultFrame: bullet1,
            velocity: velocity,
            damage: 1
        };
    } else if (type == ENTITY_TYPES.ENEMY_BULLET) {
        return {
            isLight: true,
            light: {
                r: 30,
                g: 25,
                b: 15
            },
            isRendered: false,
            type: type,
            radius: 1.5,
            x: x,
            y: y,
            image: spooderPew,
            width: 26,
            height: 339,
            moveSpeed: 0.001,
            distanceToPlayer: null,
            canSeePlayer: false,
            animation: {
                currentFrame: 0,
                frameIncrement: 0,
                frameList: [
                    spooderPew
                ]
            },
            defaultFrame: spooderPew,
            velocity: velocity,
            damage: 1.75
        };
    } else if (type == ENTITY_TYPES.FLAME) {
        return {
            isLight: false,
            // light: {
            //     r: 5,
            //     g: 0,
            //     b: 0
            // },
            isRendered: false,
            type: type,
            radius: 1.5,
            x: x,
            y: y,
            image: spooderPew,
            width: 30,
            height: 387,
            moveSpeed: 0.002,
            distanceToPlayer: null,
            canSeePlayer: false,
            animation: {
                currentFrame: 0,
                frameIncrement: 0,
                frameList: [
                    spooderPew
                ]
            },
            defaultFrame: spooderPew,
            velocity: velocity,
            damage: 0.075
        };
    } else if (type == ENTITY_TYPES.HEAL) {
        return {
            isLight: false,
            isRendered: false,
            type: type,
            radius: 100,
            x: x,
            y: y,
            image: healImage,
            width: 300,
            height: 300,
            moveSpeed: 0,
            distanceToPlayer: null,
            canSeePlayer: false,
            animation: {
                currentFrame: 0,
                frameIncrement: 0,
                frameList: [
                    healImage
                ]
            },
            defaultFrame: healImage,
        };
    } else if (type == ENTITY_TYPES.BATTERY) {
        return {
            isLight: true,
            light: {
                r: 0,
                g: 30,
                b: 30
            },
            isRendered: false,
            type: type,
            radius: 100,
            x: x,
            y: y,
            image: batteryImage,
            width: 300,
            height: 300,
            moveSpeed: 0,
            distanceToPlayer: null,
            canSeePlayer: false,
            animation: {
                currentFrame: 0,
                frameIncrement: 0,
                frameList: [
                    batteryImage
                ]
            },
            defaultFrame: batteryImage
        };
    } else if (type == ENTITY_TYPES.LIGHT) {
        return {
            isLight: true,
            light: {
                r: light.r,
                g: light.g,
                b: light.b
            },
            time: light.time,
            isRendered: false,
            type: type,
            radius: 100,
            x: x,
            y: y,
            image: ceilingLight,
            width: 300,
            height: 300,
            moveSpeed: 0,
            distanceToPlayer: null,
            canSeePlayer: false,
            animation: {
                currentFrame: 0,
                frameIncrement: 0,
                frameList: [
                    ceilingLight
                ]
            },
            defaultFrame: ceilingLight
        };
    } else if (type == ENTITY_TYPES.TEXTURED_LIGHT) {
        return {
            isLight: true,
            light: {
                r: light.r,
                g: light.g,
                b: light.b
            },
            time: light.time,
            isRendered: false,
            type: type,
            radius: 100,
            x: x,
            y: y,
            image: ceilingLight,
            width: 375,
            height: 375,
            moveSpeed: 0,
            distanceToPlayer: null,
            canSeePlayer: false,
            animation: {
                currentFrame: 0,
                frameIncrement: 0,
                frameList: [
                    ceilingLight
                ]
            },
            defaultFrame: ceilingLight
        };
    }
}

function createEnemy(x, y, type, doorId) {
    return createEntity(x, y, type, undefined, doorId);
}

function createLight(x, y, r, g, b, time) {
    return createEntity(x, y, ENTITY_TYPES.LIGHT, undefined, undefined, {r: r, g: g, b: b, time: time});
}

function createTexturedLight(x, y, r, g, b, time) {
    let e = createEntity(x, y, ENTITY_TYPES.TEXTURED_LIGHT, undefined, undefined, {r: r, g: g, b: b, time: time});
    // e.image = image;
    // e.defaultFrame = image;
    // e.animation = {
    //     currentFrame: 0,
    //     frameIncrement: 0,
    //     frameList: [
    //         image
    //     ]
    // }
    return e;
}

function createBullet(x, y, type, velocity) {
    return createEntity(x, y, type, velocity);
}

function createDoor(x, y, id, textureMapId, keysToOpen) {
    return {
        x: x,
        y: y,
        id: id,
        textureMapId: textureMapId,
        keysToOpen: keysToOpen,
        open: false,
        currentKeys: 0
    };
}

let data = {
    startScreen: {
        canStart: false,
        gamePlaying: false,
        startScreenTimer: 0.0,
        difficulty: 1,
        minDifficulty: 0,
        maxDifficulty: 2,
        difficultyCanChange: false,
        showHowToPlay: false
    },
    deathScreen: {
        deathScreenTimer: 0.0,
        deathMessage: null,
        deathMessages: [
            "'imagine dying, couldn't be me' - a rat",
            "nerd",
            "skill issue",
            "oops",
            "rest in peices",
            "'vRd7i6YF7tuCxtziEZKx' - ???",
            `'bye bye' - spooderbot number ${Math.ceil(Math.random() * 2000)}`,
            `'haha get unalived' - spooderbot number ${Math.ceil(Math.random() * 2000)}`,
            "'aaaaaaaaaaa' - you"
        ]
    },
    level: {
        level: 0,
        entities: [
            createEnemy(3.5, 8.5, ENTITY_TYPES.SMALL_MELEE, "rm1Door1"),
            createEnemy(5, 5, ENTITY_TYPES.SMALL_RANGED, "rm1Door1"),
            createEntity(8, 6.5, ENTITY_TYPES.HEAL),
            createEntity(8.5, 8.5, ENTITY_TYPES.BATTERY),
            createLight(8.5, 9.5, 150, 0, 150),
            createTexturedLight(5, 5, 150, 150, 140)
        ],
        doors: [
            createDoor(7, 8, "rm1Door1", 9, 2)
        ]
    },
    constants: Object.freeze({
        PI_OVER_ONE_HUNDRED_EIGHTY: Math.PI / 180,
        ONE_OVER_SQRT_2: 1 / Math.sqrt(2)
    }), 
    screen: {
        width: window.innerWidth,
        height: window.innerHeight,
        halfWidth: null,
        scale: null,
        viewWindowHeight: null,
        halfViewWindowHeight: null,
        viewWindowHeightMultiplier: 0.85,
        currentRed: 0,
        minRed: 0,
    },
    render: {
        defaultDelay: 15,
        delta: 1,
        previousTick: Date.now(),
        depthBuffer: []
    },
    rayCasting: {
        incrementAngle: null,
        distanceFade: 0.75, 
        ceilingColorGradient: null,
        resolution: 30,
        floorResolution: 20,
        quality: 4,
        qualityPresests: [
            {
                res: 60,
                floorRes: 4
            },
            {
                res: 50,
                floorRes: 6
            },
            {
                res: 40,
                floorRes: 10
            },
            {
                res: 30,
                floorRes: 20
            },
            {
                res: 20,
                floorRes: 30
            },
            {
                res: 10,
                floorRes: 40
            },
            {
                res: 4,
                floorRes: 50
            },
            {
                res: 2,
                floorRes: 70
            },
            {
                res: 1,
                floorRes: 120
            }
        ]
    },
    gamepadAPI: {
        index: null,
        shootButton: 7,
        bonkButton: 0,
        leftXAxis: 0,
        leftYAxis: 1,
        rightXAxis: 2,
        rightYAxis: 3,
        bonkButtonPressed: false
    },
    keys: {
        upActive: false,
        downActive: false,
        leftActive: false,
        rightActive: false,
        strafeLeftActive: false,
        strafeRightActive: false,
        shootActive: false,
        bonkJustPressed: false
    },
    player: {
        fov: 80,
        halfFov: null,
        x: 1.5,
        y: 1.5,
        angle: 45,
        normalMoveSpeed: 0.0016,
        moveSpeed: 0.0016,
        normalSpinSpeed: 0.1,
        spinSpeed: 0.1,
        radius: 100,
        shootCooldown: 300,
        shootTimer: 0.0,
        positionBuffer: [],
        positionBufferMaxLength: 7,
        hp: 25,
        maxHp: 100,
        hpPerHeal: 15,
        energy: 100,
        maxEnergy: 100,
        energyPerShot: 1,
        canRespawn: false,
        justBonked: false,
        damageOutMultiplier: 1,
        damageInMultiplier: 1
    },
    map: [
        [1, 8, 1, 1, 1, 1, 1, 1, 1, 1], 
        [8, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 2, 0, 0, 0, 0, 2, 0, 1], 
        [1, 0, 0, 2, 2, 0, 2, 0, 0, 1], 
        [1, 0, 0, 4, 0, 0, 4, 0, 0, 1], 
        [1, 0, 0, 4, 0, 0, 4, 0, 0, 1], 
        [1, 0, 0, 2, 0, 2, 2, 0, 0, 1], 
        [1, 0, 2, 0, 0, 0, 0, 8, 2, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 2], 
        [1, 1, 1, 1, 1, 1, 1, 6, 3, 6],
        [1, 1, 1, 1, 1, 1, 1, 1, 5, 1]
    ], 
    transparentTiles: [3, 4, 7], // map values, not array indecies
    walkableTiles: [0, 3, 7],
    damageableEntities: [ENTITY_TYPES.SMALL_MELEE, ENTITY_TYPES.SMALL_RANGED, ENTITY_TYPES.LARGE_RANGED, ENTITY_TYPES.FLAMETHROWER],
    textures: [
        { // 2
            width: 16,
            height: 17,
            bitmap: [
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            ],
            colors: [
                {
                    r: 100,
                    g: 100,
                    b: 100
                },
                {
                    r: 150,
                    g: 150,
                    b: 150
                }
            ]
        },
        { // 3
            width: 1,
            height: 13,
            bitmap: [
                [1], 
                [0],
                [1], 
                [0],
                [1], 
                [0], 
                [1], 
                [0],
                [1], 
                [0],
                [1], 
                [0], 
                [1]
            ],
            colors: [
                {
                    r: 200,
                    g: 100,
                    b: 255
                }, 
                {
                    r: 175,
                    g: 87,
                    b: 224
                }
            ]
        },
        { // 4
            width: 1,
            height: 1,
            bitmap: [
                [0]
            ],
            colors: [
                {
                    r: 0,
                    g: 255,
                    b: 255
                }
            ]
        },
        { // 5
            width: 15,
            height: 13,
            bitmap: [
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 
                [0, 0, 0, 0, 0, 0, 2, 2, 2, 0, 0, 0, 0, 0, 0], 
                [1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1], 
                [0, 0, 0, 0, 0, 0, 2, 2, 2, 0, 0, 0, 0, 0, 0],
                [1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1], 
                [0, 0, 0, 0, 0, 0, 2, 2, 2, 0, 0, 0, 0, 0, 0],
                [1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1], 
                [0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0], 
                [1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1],
                [0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0],
                [1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1],
                [0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            ],
            colors: [
                {
                    r: 75,
                    g: 75,
                    b: 75
                }, 
                {
                    r: 50,
                    g: 50,
                    b: 50
                }, 
                {
                    r: 0,
                    g: 255,
                    b: 75
                }
            ]
        }, 
        { // 6
            width: 1,
            height: 13,
            bitmap: [
                [1], 
                [0],
                [1], 
                [0],
                [1], 
                [0], 
                [1], 
                [0],
                [1], 
                [0],
                [1], 
                [0], 
                [1]
            ],
            colors: [
                {
                    r: 75,
                    g: 75,
                    b: 75
                }, 
                {
                    r: 50,
                    g: 50,
                    b: 50
                }
            ]
        },
        { // 7
            width: 1,
            height: 13,
            bitmap: [
                [1], 
                [0],
                [1], 
                [0],
                [1], 
                [0], 
                [1], 
                [0],
                [1], 
                [0],
                [1], 
                [0], 
                [1]
            ],
            colors: [
                {
                    r: 0,
                    g: 255,
                    b: 170
                }, 
                {
                    r: 0,
                    g: 224,
                    b: 155
                }
            ]
        },
        { // 8
            width: 16,
            height: 16,
            bitmap: [
                [0, 0, 2, 0, 1, 1, 0, 3, 1, 0, 0, 1, 3, 0, 0, 0],
                [0, 0, 0, 0, 1, 0, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0],
                [3, 0, 2, 3, 0, 3, 3, 0, 0, 0, 0, 1, 1, 1, 0, 3],
                [0, 0, 0, 3, 0, 0, 3, 3, 1, 0, 0, 1, 1, 1, 1, 0],
                [3, 1, 0, 0, 0, 1, 1, 0, 3, 3, 2, 1, 1, 1, 1, 0],
                [2, 0, 0, 0, 0, 2, 1, 0, 3, 3, 2, 2, 1, 2, 3, 3],
                [1, 0, 3, 3, 0, 0, 0, 1, 0, 3, 3, 2, 2, 0, 3, 0],
                [1, 1, 3, 3, 0, 0, 3, 3, 1, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 3, 0, 0, 3, 0, 0, 3, 0, 0, 2, 0, 1],
                [3, 0, 0, 0, 0, 3, 3, 2, 0, 0, 0, 1, 0, 0, 0, 0],
                [0, 0, 0, 1, 1, 0, 3, 0, 2, 1, 3, 0, 3, 3, 3, 2],
                [0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 2, 1, 1, 2, 3, 1, 0, 1, 0, 2, 1, 0, 3, 3],
                [0, 3, 3, 2, 2, 3, 0, 2, 0, 0, 0, 1, 2, 0, 0, 1],
                [0, 3, 3, 0, 0, 3, 3, 0, 3, 0, 0, 0, 0, 1, 0, 0],
                [3, 3, 0, 0, 2, 0, 0, 2, 2, 1, 0, 2, 0, 0, 0, 0],
            ],
            colors: [
                {
                    r: 160,
                    g: 140,
                    b: 140
                },
                {
                    r: 100,
                    g: 100,
                    b: 100
                },
                {
                    r: 75,
                    g: 75,
                    b: 75
                },
                {
                    r: 145,
                    g: 125,
                    b: 125
                }
            ]
        },
        { // 9
            width: 16,
            height: 16,
            bitmap: [
                [4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4],
                [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                [4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4],
                [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                [4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4],
                [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                [4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4],
                [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                [4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4],
                [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                [4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4],
                [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                [4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4],
                [2, 2, 3, 3, 2, 2, 3, 3, 2, 2, 3, 3, 2, 2, 3, 3],
                [3, 2, 2, 3, 3, 2, 2, 3, 3, 2, 2, 3, 3, 2, 2, 3],
                [3, 3, 2, 2, 3, 3, 2, 2, 3, 3, 2, 2, 3, 3, 2, 2]
            ],
            colors: [
                {
                    r: 75,
                    g: 50,
                    b: 50
                },
                {
                    r: 125,
                    g: 100,
                    b: 100
                },
                {
                    r: 0,
                    g: 0,
                    b: 0
                },
                {
                    r: 200,
                    g: 200,
                    b: 0
                },
                {
                    r: 50,
                    g: 25,
                    b: 25
                }
            ]
        },
        { // 10
            width: 16,
            height: 16,
            bitmap: [
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0],
                [0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0],
                [0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0],
                [0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0],
                [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0],
                [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 1, 0, 0],
                [0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0],
                [0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0],
                [0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
            ],
            colors: [
                {
                    r: 130,
                    g: 130,
                    b: 130
                },
                {
                    r: 0,
                    g: 0,
                    b: 0
                }
            ]
        }
    ],
    animations: {
        sinePulse: 0.0,
        weaponBobbing: 0.0,
        fadeStartTime: Date.now()
    }
};

function degreeToRadians(degree) {
    return degree * data.constants.PI_OVER_ONE_HUNDRED_EIGHTY;
}

function rgb(r, g, b, a = 1) {
    return `rgba(${r}, ${g}, ${b}, ${a})`;
}

data.screen.viewWindowHeight = window.innerHeight * data.screen.viewWindowHeightMultiplier;
data.screen.halfWidth = data.screen.width/2;
data.screen.halfViewWindowHeight = data.screen.viewWindowHeight/2;
data.rayCasting.incrementAngle = data.player.fov/data.screen.width;
data.player.halfFov = data.player.fov/2;

canvas = document.getElementById("canvas");
canvas.height = data.screen.height;
canvas.width = data.screen.width;

data.screen.scale = Math.sqrt(data.screen.width**2 + data.screen.height**2) / Math.sqrt(640**2 + 480**2);
data.player.positionBuffer.push({ x: data.player.x, y: data.player.y });

data.deathScreen.deathMessage = Math.floor(Math.random() * data.deathScreen.deathMessages.length);

const ctx = canvas.getContext("2d");
ctx.imageSmoothingEnabled = false;

// loading screen
ctx.fillStyle = rgb(30, 30, 30);
ctx.fillRect(0, 0, canvas.width, canvas.height);

ctx.textAlign = "center";
ctx.fillStyle = rgb(255, 255, 255);
ctx.font = 75 * data.screen.scale + "px Verdana";
ctx.fillText("Loading...", canvas.width/2, canvas.height/2);

data.rayCasting.ceilingColorGradient = ctx.createLinearGradient(data.screen.halfWidth, 0, data.screen.halfWidth, data.screen.halfViewWindowHeight);
data.rayCasting.ceilingColorGradient.addColorStop(0, rgb(126, 110, 101));
data.rayCasting.ceilingColorGradient.addColorStop(1, rgb(0, 0, 0));

var levelList = [
function() {
    data.map = [
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
        [1, 7, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0, 1],
        [1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0, 1],
        [1, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 2, 2, 0, 2, 1],//5
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 4, 4, 4, 2, 0, 0, 0, 2, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 2, 6, 3, 6, 1],
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5, 1, 1]//10
    ];
    data.level.entities = [
        createEnemy(2.5, 8.5, ENTITY_TYPES.SMALL_RANGED, "d1"),
        createEnemy(6.5, 8.5, ENTITY_TYPES.SMALL_RANGED, "d1"),
        createEnemy(6.5, 2.5, ENTITY_TYPES.SMALL_MELEE, "d1"),

        createEnemy(10.5, 7.5, ENTITY_TYPES.SMALL_RANGED),
        createEntity(10.5, 2.5, ENTITY_TYPES.BATTERY),

        createLight(1.5, 1.5, 0, 150, 50),
        createLight(10.5, 9.5, 150, 0, 150)
    ];
    data.level.doors = [
        createDoor(8, 2, "d1", 9, 3)
    ];
    data.player.x = 1.5;
    data.player.y = 1.5;
    data.player.angle = 45;
},
function() {
    data.map = [
        //0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12,13,14,15,16,17
        [2, 2, 5, 2, 1, 2, 2, 2, 6, 2, 2, 2, 2, 2, 1, 2, 2, 2],
        [2, 5, 3, 0, 0, 0, 6, 0, 7, 0, 6, 2, 0, 0, 0, 0, 0, 2],
        [1, 1, 0, 0, 0, 0, 6, 0, 0, 0, 6, 2, 0, 0, 0, 0, 0, 2],
        [1, 0, 0, 0, 0, 0, 2, 2, 0, 2, 2, 2, 0, 0, 0, 0, 0, 1],
        [2, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1],
        [2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 2],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
        [1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2],
        [2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2]
    ];
    data.level.entities = [
        createEnemy(4.5, 4.5, ENTITY_TYPES.FLAMETHROWER),
        createEnemy(15.5, 2.5, ENTITY_TYPES.FLAMETHROWER, "d1"),
        createEnemy(2.5, 4.5, ENTITY_TYPES.FLAMETHROWER),
        createEnemy(3.5, 3.5, ENTITY_TYPES.FLAMETHROWER),


        createEntity(11.5, 6.5, ENTITY_TYPES.BATTERY),
        createEntity(11.5, 1.5, ENTITY_TYPES.HEAL),

        createLight(8.5, 1.5, 0, 150, 50),
        createLight(2.5, 1.5, 150, 0, 150),

        createTexturedLight(9, 6, 100, 100, 90),
        createTexturedLight(3, 6, 100, 100, 90),
        createTexturedLight(15.5, 4, 100, 100, 90)

    ];
    data.level.doors = [
        createDoor(6, 6, "d1", 9, 1)
    ];
    data.player.x = 8.5;
    data.player.y = 1.5;
    data.player.angle = 90;
},
function() {
    data.map = [
       //0, 1, 2, 3, 4, 5, 6, 7, 8, 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
        [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 1],
        [1, 0, 0, 7, 0, 0, 2, 0, 0, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 2, 0, 0, 2, 2, 2, 0, 0, 0, 0, 0, 2, 0, 3, 5, 2, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 5, 2, 0, 0, 1],//5
        [1, 0, 0, 0, 0, 0, 2, 0, 0, 2, 2, 2, 0, 0, 0, 0, 0, 2, 0, 3, 5, 2, 0, 0, 8],
        [1, 0, 0, 0, 0, 0, 8, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 0, 0, 8],
        [1, 0, 0, 0, 0, 0, 8, 0, 0, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8],
        [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8],
        [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],//10
        [1, 2, 0, 0, 0, 2, 1, 2, 2, 0, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1],
        [1, 0, 2, 0, 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 8],
        [1, 2, 0, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 8, 0, 8, 0, 0, 0, 0, 8],
        [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 8, 8, 0, 0, 0, 8, 0, 0, 0, 8, 0, 0, 0, 0, 8],
        [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 1, 0, 0, 0, 0, 1],//15
        [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 8, 8, 8, 8, 8],
        [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8],
        [1, 2, 8, 8, 2, 2, 1, 1, 8, 8, 8, 8, 1, 1, 0, 0, 8, 8, 0, 8, 0, 0, 0, 0, 8],
        [1, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 8, 0, 8, 0, 0, 0, 0, 8],
        [1, 0, 0, 0, 0, 8, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 8],//20
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 8],
        [8, 0, 0, 0, 0, 8, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 8],
        [8, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 8],
        [1, 8, 8, 8, 1, 1, 1, 1, 1, 1, 1, 8, 1, 1, 1, 8, 8, 1, 1, 1, 8, 8, 8, 8, 8]
    ];
    data.level.entities = [
        createEnemy(1.5, 14.5, ENTITY_TYPES.SMALL_MELEE, "d1"),
        createEnemy(1.5, 15.5, ENTITY_TYPES.SMALL_MELEE, "d1"),
        createEnemy(1.5, 16.5, ENTITY_TYPES.SMALL_MELEE, "d1"),
        createEnemy(1.5, 17.5, ENTITY_TYPES.SMALL_MELEE, "d1"),
        createEnemy(3.5, 16, ENTITY_TYPES.HELICOPTER, "d1"),
        createEnemy(4.5, 14.5, ENTITY_TYPES.SMALL_MELEE, "d1"),
        createEnemy(4.5, 15.5, ENTITY_TYPES.SMALL_MELEE, "d1"),
        createEnemy(4.5, 16.5, ENTITY_TYPES.SMALL_MELEE, "d1"),
        createEnemy(3.5, 13, ENTITY_TYPES.HELICOPTER, "d1"),
        createEntity(3.5, 16.5, ENTITY_TYPES.BATTERY),
        // createEntity(1.5, 10.5, ENTITY_TYPES.BATTERY),
        // createEntity(5.5, 10.5, ENTITY_TYPES.BATTERY),
        createEnemy(9.5, 9.5, ENTITY_TYPES.SMALL_RANGED, "d2"),
        createEnemy(11.5, 9.5, ENTITY_TYPES.SMALL_RANGED, "d2"),
        createEnemy(15.5, 4.5, ENTITY_TYPES.SMALL_MELEE, "d2"),
        createEnemy(15.5, 6.5, ENTITY_TYPES.SMALL_MELEE, "d2"),
        createEnemy(8.5, 1.5, ENTITY_TYPES.SMALL_MELEE, "d2"),
        createEnemy(8.5, 2.5, ENTITY_TYPES.SMALL_MELEE, "d2"),
        createEnemy(7.5, 2.5, ENTITY_TYPES.SMALL_MELEE, "d2"),
        createEnemy(1.5, 19.5, ENTITY_TYPES.SMALL_MELEE, "secret1"),
        createEnemy(9.5, 15.5, ENTITY_TYPES.SMALL_RANGED, "secret1"),
        createEnemy(14.5, 14.5, ENTITY_TYPES.FLAMETHROWER, "d3"),
        createEnemy(16.5, 14.5, ENTITY_TYPES.FLAMETHROWER, "d3"),
        createEnemy(15.5, 20.5, ENTITY_TYPES.SMALL_RANGED, "d3"),
        createEnemy(18.5, 20.5, ENTITY_TYPES.SMALL_RANGED, "d3"),
        createEnemy(16.5, 17.5, ENTITY_TYPES.SMALL_RANGED, "d3"),
        createEntity(12.5, 13.5, ENTITY_TYPES.BATTERY),
        createEntity(1.5, 20.5, ENTITY_TYPES.HEAL),
        createEntity(9.5, 21.5, ENTITY_TYPES.BATTERY),
        createEntity(11.5, 21.5, ENTITY_TYPES.HEAL),
        createEntity(21.5, 21.5, ENTITY_TYPES.HEAL),

        createTexturedLight(3.5, 6, 100, 100, 90),
        createTexturedLight(8.5, 10, 100, 100, 90),
        createTexturedLight(8.5, 14.5, 100, 100, 90),
        createTexturedLight(13.5, 10, 100, 100, 90),
        createTexturedLight(16.5, 21.5, 100, 100, 90),

        createLight(3.5, 2.5, 0, 150, 50),
        createLight(19.5, 5.5, 150, 0, 150)
    ];
    data.level.doors = [
            createDoor(9, 11, "d2", 9, 6),
            createDoor(6, 3, "d1", 9, 6),
            createDoor(17, 5, "d3", 9, 4),
            createDoor(19, 17, "secret1", 9, 2),
    ];
    data.player.x = 3.5;
    data.player.y = 2.5;
    data.player.angle = 90;
},

function() {
    data.map = [
        [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
        [2, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [2, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [2, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [2, 0, 8, 8, 0, 0, 2, 0, 0, 1],
        [2, 0, 8, 8, 0, 0, 2, 0, 0, 1],
        [2, 0, 0, 0, 0, 0, 4, 0, 0, 1],
        [2, 0, 0, 0, 0, 0, 4, 0, 0, 1],
        [2, 8, 0, 0, 0, 0, 4, 0, 0, 1],
        [2, 8, 0, 0, 0, 0, 4, 0, 0, 1],
        [2, 0, 0, 0, 8, 0, 4, 0, 0, 1],
        [2, 0, 0, 0, 0, 0, 4, 0, 0, 1],
        [2, 0, 0, 0, 0, 0, 4, 0, 0, 1],
        [2, 8, 0, 0, 0, 0, 4, 0, 7, 1],
        [2, 8, 0, 0, 0, 0, 4, 0, 0, 1],
        [2, 6, 5, 3, 5, 2, 2, 2, 2, 2],
        [1, 1, 1, 5, 1, 1, 1, 1, 1, 1]
    ];
    data.level.entities = [
        createEnemy(3.5, 12.5, ENTITY_TYPES.LARGE_RANGED, "d1"),

        createLight(8.5, 13.5, 0, 150, 50),
        createLight(3.5, 15.5, 150, 0, 150)
    ];
    data.level.doors = [
        createDoor(3, 14, "d1", 9, 1)
    ];
    data.player.x = 8.5;
    data.player.y = 13.5;
    data.player.angle = 180;
},
function() {
    data.map = [
        [2, 2, 2, 2],
        [2, 0, 0, 2],
        [2, 0, 7, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [2, 0, 0, 2],
        [5, 0, 0, 5],
        [6, 3, 3, 6],
        [2, 5, 5, 2]
    ];
    data.level.entities = [
        createEntity(2.5, 17.5, ENTITY_TYPES.HEAL),
        createEntity(1.5,16.5, ENTITY_TYPES.BATTERY),
        createEnemy(2.5, 19.5, ENTITY_TYPES.HELICOPTER),


        createLight(2.5, 2.5, 0, 150, 150),
        createLight(2, 28.5, 150, 0, 150)    
    ];
    data.level.doors = [
        
    ];
    data.player.x = 2.5;
    data.player.y = 2.5;
    data.player.angle = 90;
},
function() {
    data.map = [
        [1, 6, 1, 1, 1, 1, 1, 1, 1, 1], 
        [6, 7, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], //5
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], //10
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], //15
        [1, 1, 4, 2, 0, 0, 2, 4, 1, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 2, 2, 4, 4, 2, 2, 0, 1], 
        [1, 0, 2, 0, 0, 0, 0, 2, 0, 1], 
        [1, 0, 4, 0, 0, 0, 0, 4, 0, 1], //20
        [1, 0, 4, 0, 0, 0, 0, 4, 0, 1], 
        [1, 0, 2, 0, 0, 0, 0, 2, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 2, 0, 0, 0, 0, 2, 0, 1], //25
        [1, 0, 4, 0, 0, 0, 0, 4, 0, 1], 
        [1, 0, 4, 0, 0, 0, 0, 4, 0, 1], 
        [1, 0, 2, 0, 0, 0, 0, 2, 0, 1], 
        [1, 0, 2, 6, 3, 3, 6, 2, 0, 1],
        [1, 0, 0, 6, 5, 5, 6, 0, 0, 1], //30
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
    ];
    data.level.entities = [
        createEnemy(2, 5, ENTITY_TYPES.HELICOPTER, "rm2door1"),
        createEnemy(2, 13, ENTITY_TYPES.HELICOPTER, "rm2door1"),
        createEnemy(8, 5, ENTITY_TYPES.HELICOPTER, "rm2door1"),
        createEnemy(8, 13, ENTITY_TYPES.HELICOPTER, "rm2door1"),

        createEnemy(8.5, 25, ENTITY_TYPES.LARGE_RANGED, "rm2door2"),
        createEnemy(1.5, 25, ENTITY_TYPES.LARGE_RANGED, "rm2door2"),
        createEnemy(8.5, 21, ENTITY_TYPES.HELICOPTER, "rm2door2"),
        createEnemy(8.5, 29, ENTITY_TYPES.HELICOPTER, "rm2door2"),
        createEnemy(1.5, 21, ENTITY_TYPES.HELICOPTER, "rm2door2"),
        createEnemy(1.5, 29, ENTITY_TYPES.HELICOPTER, "rm2door2"),

        createEnemy(5, 20, ENTITY_TYPES.HELICOPTER),
        createEnemy(4, 28, ENTITY_TYPES.HELICOPTER),
        createEnemy(6, 28, ENTITY_TYPES.HELICOPTER),
        createEnemy(5, 28.75, ENTITY_TYPES.HELICOPTER),

        createEntity(2.5, 30.5, ENTITY_TYPES.HEAL),
        createEntity(7.5, 30.5, ENTITY_TYPES.BATTERY),
        createEntity(8.5, 1.5, ENTITY_TYPES.BATTERY),

        createLight(1.5, 1.5, 0, 150, 50),
        createLight(5, 29.5, 160, 0, 160),

        createTexturedLight(3, 13, 130, 130, 120),
        createTexturedLight(7, 13, 130, 130, 120),
        createTexturedLight(3, 7, 130, 130, 120),
        createTexturedLight(7, 7, 130, 130, 120),
        createTexturedLight(5, 21, 130, 130, 120),
        createTexturedLight(5, 27, 130, 130, 120)
    ];
    data.level.doors = [
        createDoor(4, 16, "rm2door1", 9, 4),
        createDoor(5, 16, "rm2door1", 9, 4),

        createDoor(2, 23, "rm2door2", 9, 6),
        createDoor(2, 24, "rm2door2", 9, 6),
        createDoor(7, 23, "rm2door2", 9, 6),
        createDoor(7, 24, "rm2door2", 9, 6)
    ];
    data.player.x = 1.5;
    data.player.y = 1.5;
    data.player.angle = 45;
},
    function() {
        data.map = [
            [1, 1, 1, 6, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 
            [1, 1, 6, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1], // 1
            [1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 1], 
            [1, 1, 1, 0, 8, 1, 4, 4, 1, 1, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1], 
            [1, 1, 1, 0, 0, 1, 0, 0, 1, 1, 0, 2, 8, 0, 0, 0, 0, 0, 0, 1], 
            [1, 1, 1, 8, 8, 1, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1], // 5
            [1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1], 
            [1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 2, 0, 0, 8, 0, 0, 0, 0, 1], 
            [1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 1, 2, 0, 0, 0, 0, 0, 0, 8, 1], 
            [1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1], 
            [1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1], // 10
            [1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1], 
            [1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 2, 2, 0, 0, 0, 0, 0, 8, 0, 1], 
            [1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
            [1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 2, 2, 0, 8, 0, 0, 0, 0, 0, 1], 
            [1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1], // 15
            [1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1], 
            [1, 1, 1, 0, 0, 0, 1, 1, 1, 4, 1, 2, 0, 0, 0, 0, 0, 0, 0, 1], 
            [1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 6, 2, 2, 0, 0, 0, 0, 0, 0, 1], 
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 5, 2, 0, 0, 0, 0, 8, 0, 1], 
            [1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 6, 2, 2, 0, 0, 0, 0, 0, 0, 1], // 20
            [1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 
            [1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        ];
        data.level.entities = [
            createEnemy(7, 5, ENTITY_TYPES.LARGE_RANGED, "rm3Door1"),
            createEnemy(3.5, 19.5, ENTITY_TYPES.FLAMETHROWER, "rm3Door1"),
            createEnemy(5.5, 19.5, ENTITY_TYPES.SMALL_RANGED, "rm3Door1"),
            createEnemy(4.5, 19.5, ENTITY_TYPES.SMALL_MELEE, "rm3Door1"),

            createEnemy(15, 17, ENTITY_TYPES.LARGE_RANGED, "rm3Door2"),
            createEnemy(15, 4, ENTITY_TYPES.LARGE_RANGED, "rm3Door2"),
            createEnemy(15, 6, ENTITY_TYPES.SMALL_RANGED, "rm3Door2"),
            createEnemy(15, 15, ENTITY_TYPES.SMALL_RANGED, "rm3Door2"),
            createEnemy(15, 8, ENTITY_TYPES.SMALL_MELEE, "rm3Door2"),
            createEnemy(15, 13, ENTITY_TYPES.SMALL_MELEE, "rm3Door2"),
            createEnemy(15, 10.5, ENTITY_TYPES.FLAMETHROWER, "rm3Door2"),

            createEnemy(4.5, 22.5, ENTITY_TYPES.SMALL_MELEE, "rm3Door3"),
            createEnemy(5, 22.5, ENTITY_TYPES.SMALL_RANGED, "rm3Door3"),
            createEnemy(5.5, 22.5, ENTITY_TYPES.SMALL_MELEE, "rm3Door3"),

            createEnemy(1.5, 18.5, ENTITY_TYPES.FLAMETHROWER, "rm3Door4"),
            createEnemy(1.5, 19.5, ENTITY_TYPES.LARGE_RANGED, "rm3Door4"),
            createEnemy(1.5, 20.5, ENTITY_TYPES.FLAMETHROWER, "rm3Door4"),

            createEnemy(9, 19.5, ENTITY_TYPES.FLAMETHROWER),
            createEnemy(18, 13.5, ENTITY_TYPES.HELICOPTER),

            createEntity(10, 16, ENTITY_TYPES.HEAL),
            createEntity(18.5, 20.5, ENTITY_TYPES.BATTERY),
            createEntity(8.15, 19.5, ENTITY_TYPES.BATTERY),

            createLight(3.5, 1.5, 0, 150, 50),
            createLight(10.5, 19.5, 150, 0, 150),
            
            createTexturedLight(5, 19.5, 50, 50, 40),
            createTexturedLight(9, 19.5, 100, 100, 90)
        ];
        data.level.doors = [
            createDoor(12, 2, "rm3Door1", 9, 4),
            createDoor(11, 13, "rm3Door1", 9, 4),

            createDoor(4, 21, "rm3Door2", 9, 7),
            createDoor(5, 21, "rm3Door2", 9, 7),

            createDoor(2, 18, "rm3Door3", 9, 3),
            createDoor(2, 19, "rm3Door3", 9, 3),
            createDoor(2, 20, "rm3Door3", 9, 3),

            createDoor(7, 19, "rm3Door4", 9, 3)
        ];
        data.player.x = 3.5;
        data.player.y = 1.5;
        data.player.angle = 45;
    },
    function() {
        data.map = [
            [8, 8, 1, 1, 1, 1, 1, 1, 1, 1], 
            [8, 0, 0, 0, 1, 1, 1, 1, 1, 1], 
            [8, 0, 0, 0, 0, 0, 0, 0, 0, 2], 
            [1, 6, 1, 0, 1, 1, 1, 1, 1, 1], 
            [6, 7, 0, 0, 1, 0, 0, 0, 0, 1], 
            [1, 0, 0, 0, 1, 0, 1, 1, 0, 1], 
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
            [1, 1, 1, 0, 0, 1, 0, 0, 0, 1], 
            [1, 0, 0, 0, 0, 1, 0, 0, 0, 1], 
            [1, 0, 0, 1, 0, 1, 1, 4, 1, 1], 
            [1, 0, 0, 1, 0, 1, 0, 0, 0, 1], 
            [1, 0, 1, 1, 0, 1, 0, 0, 0, 1], 
            [1, 0, 0, 0, 0, 1, 0, 0, 0, 1], 
            [1, 1, 1, 0, 1, 6, 3, 6, 0, 1], 
            [1, 0, 0, 0, 0, 1, 5, 1, 0, 1], 
            [1, 0, 0, 0, 0, 0, 1, 1, 0, 1], 
            [1, 0, 1, 1, 1, 0, 0, 1, 0, 1], 
            [1, 0, 1, 0, 0, 0, 0, 1, 0, 1], 
            [1, 0, 1, 0, 0, 1, 1, 1, 0, 1], 
            [1, 0, 1, 0, 0, 1, 0, 1, 0, 1], 
            [1, 0, 1, 4, 4, 1, 0, 0, 0, 1], 
            [1, 0, 0, 0, 0, 1, 0, 1, 0, 1], 
            [1, 0, 0, 0, 0, 0, 0, 1, 0, 1], 
            [1, 0, 0, 0, 0, 1, 0, 1, 0, 1], 
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        ];
        data.level.entities = [
            createLight(1.5, 4.5, 0, 150, 50),
            createLight(6.5, 13.5, 150, 0, 150),

            createEntity(8.5, 2.5, ENTITY_TYPES.HEAL),

            createEnemy(2, 2, ENTITY_TYPES.LARGE_RANGED),
            createEnemy(8.5, 4.5, ENTITY_TYPES.HELICOPTER),
            createEnemy(4, 19, ENTITY_TYPES.LARGE_RANGED),
            createEnemy(5.5, 17.5, ENTITY_TYPES.HELICOPTER),
            createEnemy(6.5, 23.5, ENTITY_TYPES.SMALL_RANGED),
            createEnemy(8.5, 23.5, ENTITY_TYPES.FLAMETHROWER),
            createEnemy(1.5, 12.5, ENTITY_TYPES.SMALL_MELEE),
        ];
        data.level.doors = [];
        data.player.x = 1.5;
        data.player.y = 4.5;
        data.player.angle = 45;
    },
    function() {
        data.map = [
            [10, 10, 10, 10, 10, 10, 10, 10, 10, 10], 
            [10, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 10], 
            [10, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 10], 
            [10, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 10], 
            [10, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 10], 
            [10, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 10], 
            [10, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 10], 
            [10, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 10], 
            [10, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 10], 
            [10, 10, 10, 10, 10, 10, 10, 10, 10, 10]
        ];
        data.level.entities = [
            createLight(1.5, 8.9, 255, 0, 0),
            createLight(2.5, 8.9, 255, 127, 0),
            createLight(3.5, 8.9, 255, 255, 0),
            createLight(4.5, 8.9, 0, 255, 0),
            createLight(5.5, 8.9, 0, 0, 255),
            createLight(6.5, 8.9, 75, 0, 130),
            createLight(7.5, 8.9, 148, 0, 211),

            createLight(8.9, 1.5, 255, 0, 0),
            createLight(8.9, 2.5, 255, 127, 0),
            createLight(8.9, 3.5, 255, 255, 0),
            createLight(8.9, 4.5, 0, 255, 0),
            createLight(8.9, 5.5, 0, 0, 255),
            createLight(8.9, 6.5, 75, 0, 130),
            createLight(8.9, 7.5, 148, 0, 211)
        ];
        data.level.doors = [];
        data.player.x = 2.5;
        data.player.y = 2.5;
        data.player.angle = 45;
    }
];

function nextLevel() {
    levelList[data.level.level]();
    data.level.level += 1;
}

function start() {
    bkgTrack1.currentTime = 0;
    bkgTrack1.play();
    bkgTrack1.loop = true;
    data.startScreen.canStart = false;
    data.startScreen.gamePlaying = true;
    data.keys.bonkJustPressed = false;

    // difficulty stuff
    const DIFFICULTY = data.startScreen.difficulty;
    data.player.energyPerShot = 1.75 + DIFFICULTY * 0.25;
    data.player.hpPerHeal = 20 - DIFFICULTY * 5;
    data.player.damageInMultiplier = 0.75 + DIFFICULTY * 0.25;
    data.player.damageOutMultiplier = 1.25 - DIFFICULTY * 0.25;

    data.animations.fadeStartTime = Date.now()
}

function reset(level = 0) {
    data.level = {
        level: 0,
        entities: [
            createEnemy(3.5, 8.5, ENTITY_TYPES.SMALL_MELEE, "rm1Door1"),
            createEnemy(5, 5, ENTITY_TYPES.SMALL_RANGED, "rm1Door1"),
            createEntity(8, 6.5, ENTITY_TYPES.HEAL),
            createEntity(8.5, 8.5, ENTITY_TYPES.BATTERY),
            createLight(8.5, 9.5, 150, 0, 150),
            createTexturedLight(5, 5, 150, 150, 140)
        ],
        doors: [
            createDoor(7, 8, "rm1Door1", 9, 2)
        ]
    };

    data.deathScreen.deathMessage = Math.floor(Math.random() * data.deathScreen.deathMessages.length);

    data.player.justBonked = false;
    data.player.canRespawn = false;
    data.player.x = 1.5;
    data.player.y = 1.5;
    data.player.angle = 45;
    data.player.moveSpeed = 0.0016;
    data.player.shootTimer = 0.0;
    data.player.positionBuffer = [];
    data.player.hp = 25;
    data.player.energy = 100;
    data.screen.currentRed = 0;
    data.keys.bonkJustPressed = false;
    data.gamepadAPI.bonkButtonPressed = false;

    data.map = [
        [1, 8, 1, 1, 1, 1, 1, 1, 1, 1], 
        [8, 0, 0, 0, 0, 0, 0, 0, 0, 1], 
        [1, 0, 2, 0, 0, 0, 0, 2, 0, 1], 
        [1, 0, 0, 2, 2, 0, 2, 0, 0, 1], 
        [1, 0, 0, 4, 0, 0, 4, 0, 0, 1], 
        [1, 0, 0, 4, 0, 0, 4, 0, 0, 1], 
        [1, 0, 0, 2, 0, 2, 2, 0, 0, 1], 
        [1, 0, 2, 0, 0, 0, 0, 8, 2, 1], 
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 2], 
        [1, 1, 1, 1, 1, 1, 1, 6, 3, 6],
        [1, 1, 1, 1, 1, 1, 1, 1, 5, 1]
    ];

    if (level > 0) {
        levelList[level - 1]();
        data.level.level = level;
    }

    // bkgTrack1.currentTime = 0;
    // bkgTrack1.play();
    // bkgTrack1.loop = true;

    // data.animations.fadeStartTime = Date.now();

    data.startScreen.gamePlaying = false;
    data.startScreen.startScreenTimer = 10000;
    data.startScreen.showHowToPlay = false;
}


window.addEventListener("gamepadconnected", function(event) {
    data.gamepadAPI.index = event.gamepad.index;
});

window.addEventListener("gamepaddisconnected", function(event) {
    data.gamepadAPI.index = null;
});

document.addEventListener("keydown", function(event) {
    if (data.player.canRespawn) {
        reset(0);
    } else {
        if (event.keyCode == 38 || event.keyCode == 87) {
            data.keys.upActive = true;
        }
        if (event.keyCode == 40 || event.keyCode == 83) {
            data.keys.downActive = true;
        }
        if (event.keyCode == 37 || event.keyCode == 65) {
            data.keys.leftActive = true;
        }
        if (event.keyCode == 39 || event.keyCode == 68) {
            data.keys.rightActive = true;
        }
        if (event.keyCode == 188) {
            data.keys.strafeLeftActive = true;
        }
        if (event.keyCode == 190) {
            data.keys.strafeRightActive = true;
        }
        if (event.keyCode == 16) {
            data.keys.shootActive = true;
        }
        if (event.keyCode == 191 && !data.player.justBonked) {
            data.keys.bonkJustPressed = true;
        }
        if (event.keyCode == 187) {
            data.rayCasting.quality += 1;
            if (data.rayCasting.quality > data.rayCasting.qualityPresests.length - 1) {
                data.rayCasting.quality = data.rayCasting.qualityPresests.length - 1;
            }
            data.rayCasting.resolution = data.rayCasting.qualityPresests[data.rayCasting.quality].res;
            data.rayCasting.floorResolution = data.rayCasting.qualityPresests[data.rayCasting.quality].floorRes;
        }
        if (event.keyCode == 189) {
            data.rayCasting.quality -= 1;
            if (data.rayCasting.quality < 0) {
                data.rayCasting.quality = 0;
            }
            data.rayCasting.resolution = data.rayCasting.qualityPresests[data.rayCasting.quality].res;
            data.rayCasting.floorResolution = data.rayCasting.qualityPresests[data.rayCasting.quality].floorRes;
        }
    }
    if (!data.startScreen.gamePlaying && event.keyCode == 72) {
            data.startScreen.showHowToPlay = !data.startScreen.showHowToPlay
    } else if (data.startScreen.canStart && !(data.keys.strafeLeftActive || data.keys.strafeRightActive) && !data.startScreen.showHowToPlay && !(event.keyCode == 189 || event.keyCode == 187)) {
        start();
    }
});

document.addEventListener("keyup", function(event) {
    if (event.keyCode == 38 || event.keyCode == 87) {
        data.keys.upActive = false;
    }
    if (event.keyCode == 40 || event.keyCode == 83) {
        data.keys.downActive = false;
    }
    if (event.keyCode == 37 || event.keyCode == 65) {
        data.keys.leftActive = false;
    }
    if (event.keyCode == 39 || event.keyCode == 68) {
        data.keys.rightActive = false;
    }
    if (event.keyCode == 188) {
        data.keys.strafeLeftActive = false;
    }
    if (event.keyCode == 190) {
        data.keys.strafeRightActive = false;
    }
    if (event.keyCode == 16) {
        data.keys.shootActive = false;
    }
});


function drawLine(x1, y1, x2, y2, color) {
    ctx.strokeStyle = color;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
}

function clearScreen() {
    ctx.clearRect(0, 0, data.screen.width, data.screen.height);
}

function resize() {
    data.screen.width = window.innerWidth;
    data.screen.height = window.innerHeight;
    data.screen.viewWindowHeight = window.innerHeight * data.screen.viewWindowHeightMultiplier;
    data.screen.halfWidth = data.screen.width/2;
    data.screen.halfViewWindowHeight = data.screen.viewWindowHeight/2;
    data.rayCasting.incrementAngle = data.player.fov/data.screen.width;
    data.player.halfFov = data.player.fov/2;
    canvas.height = data.screen.height;
    canvas.width = data.screen.width;
    data.screen.scale = Math.sqrt(data.screen.width**2 + data.screen.height**2) / Math.sqrt(640**2 + 480**2);
    ctx.imageSmoothingEnabled = false;
    data.rayCasting.ceilingColorGradient = ctx.createLinearGradient(data.screen.halfWidth, 0, data.screen.halfWidth, data.screen.halfViewWindowHeight);
    data.rayCasting.ceilingColorGradient.addColorStop(0, rgb(126, 110, 101));
    data.rayCasting.ceilingColorGradient.addColorStop(1, rgb(0, 0, 0));
}

function playSoundFromStart(sound) {
    sound.currentTime = 0;
    sound.play();
}

function damagePlayer(amount) {
    data.player.hp -= amount * data.player.damageInMultiplier;
    data.screen.currentRed += 150 * amount * data.player.damageInMultiplier + 15;
}

function deleteOnWall(entity, entityIndex) {
    data.level.entities.splice(entityIndex, 1);
    // data.level.entities.push(createLight(entity.x - entity.velocity.x * data.render.delta * 2, entity.y - entity.velocity.y * data.render.delta * 2, 50, 0, 0, 100));
}

function damageAndDeleteOnPlayer(entity, entityIndex) {
    data.level.entities.splice(entityIndex, 1);
    damagePlayer(entity.damage);
}

function damageEnemy(enemy, damage, isLaser = false) {
    if (enemy.hp != undefined && (enemy.canSeePlayer || !isLaser)) {
        enemy.hp -= damage * data.player.damageOutMultiplier;
        if (isLaser) {
            enemy.laserTime = Date.now();
        }
        if (enemy.hp <= 0) {
            if (enemy.alive) {
                playSoundFromStart(killSFX);
                if (enemy.doorId != undefined && enemy.type != ENTITY_TYPES.HELICOPTER) {
                    data.level.doors.forEach(door => {
                        if (enemy.doorId == door.id) {
                            door.currentKeys += 1;
                            if (door.currentKeys >= door.keysToOpen) {
                                door.open = true;
                                playSoundFromStart(doorSFX);
                            }
                        }
                    });
                }
                if (enemy.type == ENTITY_TYPES.HELICOPTER) {
                    explode(enemy);
                } else {
                    data.level.entities.push(createLight(enemy.x, enemy.y, 20, 10, 0, enemy.laserTime - Date.now() + 10000));
                }
            }
            enemy.alive = false;
        } else {
            playSoundFromStart(enemyHurtSFX);
        }
    }
}

function damageAndDeleteOnEntity(entity, entityIndex, otherEntity, otherEntityIndex) {
    data.level.entities.splice(entityIndex, 1);
    damageEnemy(otherEntity, 1, true);
    data.level.entities.push(createLight(entity.x, entity.y, 50, 0, 0, 100));
}

function explode(entity) {
    entity.hp = 0;
    entity.alive = false;
    entity.animation = {
        currentFrame: 0,
        frameIncrement: 0,
        frameList: [
            explosion
        ]
    };
    entity.image = explosion;

    playSoundFromStart(boomSFX);
    data.level.entities.push(createLight(entity.x, entity.y, 600, 600, 400, 200));

    data.level.doors.forEach(door => {
        if (entity.doorId == door.id) {
            door.currentKeys += 1;
            if (door.currentKeys >= door.keysToOpen) {
                door.open = true;
                playSoundFromStart(doorSFX);
            }
        }
    });

    const FLAME_COUNT = 3;
    for (let i = 0; i < FLAME_COUNT; i++) {
        let angle = degreeToRadians(i * (360 / FLAME_COUNT));
        
        let projectileVelocity = {
            x: Math.sin(angle),
            y: Math.cos(angle)
        };
        let e = createBullet(entity.x, entity.y, ENTITY_TYPES.FLAME, projectileVelocity);
        e.velocity.x *= e.moveSpeed;
        e.velocity.y *= e.moveSpeed;
        e.x += e.velocity.x;
        e.y += e.velocity.y;
        e.distanceToPlayer = Math.sqrt((data.player.x - e.x)**2 + (data.player.y - e.y)**2);
        data.level.entities.push(e);
    }
    const BULLET_COUNT = 40;
    for (let i = 0; i < BULLET_COUNT; i++) {
        let angle = degreeToRadians(i * (360 / BULLET_COUNT));
        
        let projectileVelocity = {
            x: Math.sin(angle),
            y: Math.cos(angle)
        };
        let e = createBullet(entity.x, entity.y, ENTITY_TYPES.ENEMY_BULLET, projectileVelocity);
        e.velocity.x *= e.moveSpeed;
        e.velocity.y *= e.moveSpeed;
        e.x += e.velocity.x;
        e.y += e.velocity.y;
        e.distanceToPlayer = Math.sqrt((data.player.x - e.x)**2 + (data.player.y - e.y)**2);
        e.isLight = false;
        data.level.entities.push(e);
    }

    data.level.entities.forEach(nonExplodingEntity => {
        if (nonExplodingEntity !== entity) {
            const DX = nonExplodingEntity.x - entity.x;
            const DY = nonExplodingEntity.y - entity.y;
            const DISTANCE = Math.sqrt(DX ** 2 + DY ** 2);

            if (DISTANCE < 1) {
                damageEnemy(nonExplodingEntity, 3);
            }
        }
    });

    const DISTANCE_TO_PLAYER = Math.sqrt((data.player.x - entity.x) ** 2 + (data.player.y - entity.y) ** 2);
    if (DISTANCE_TO_PLAYER < 1) {
        damagePlayer(Math.random() * 10 + 5);
    }
}

// object needs x, y, and a radius, velocities cannot already be multiplied by delta
function moveAndSlide(object, xVel, yVel) {
    try {
        let newx = object.x + xVel * data.render.delta;
        let newy = object.y + yVel * data.render.delta;
        let checkx = Math.floor(newx + xVel * object.radius);
        let checky = Math.floor(newy + yVel * object.radius);

        if (Math.abs(newy - object.y) < 1) {
            if (data.walkableTiles.includes(data.map[checky][Math.floor(object.x)])) {
                object.y = newy;
            } 
        } else {
            if (data.rayCasting.quality > 0) {
                data.rayCasting.quality -= 1;
            }
            data.rayCasting.resolution = data.rayCasting.qualityPresests[data.rayCasting.quality].res;
            data.rayCasting.floorResolution = data.rayCasting.qualityPresests[data.rayCasting.quality].floorRes;
        }

        if (Math.abs(newx - object.x) < 1) {
            if (data.walkableTiles.includes(data.map[Math.floor(object.y)][checkx])) {
                object.x = newx;
            }
        } else {
            if (data.rayCasting.quality > 0) {
                data.rayCasting.quality -= 1;
            }
            data.rayCasting.resolution = data.rayCasting.qualityPresests[data.rayCasting.quality].res;
            data.rayCasting.floorResolution = data.rayCasting.qualityPresests[data.rayCasting.quality].floorRes;
        }

    } catch { console.log("moveAndSlide error!"); }
}

// must be an entity, velocities cannot already be multiplied by delta, onWallHit and onEntityHit are functions
// onWallHit must have entity and index params
// onEntityHit must have entity, other entity, and index params
// onPlayerHit must have entity and index params

function moveAndCollide(entityIndex, entity, xVel, yVel, onWallHit, onEntityHit, onPlayerHit) {
    let newx = entity.x + xVel * data.render.delta;
    let newy = entity.y + yVel * data.render.delta;
    let checkx = Math.floor(newx + xVel * entity.radius);
    let checky = Math.floor(newy + yVel * entity.radius);

    try {
        if (data.walkableTiles.includes(data.map[checky][Math.floor(entity.x)]) && data.walkableTiles.includes(data.map[Math.floor(entity.y)][checkx])) {
            entity.y = newy;
            entity.x = newx;
        } else {
            onWallHit(entity, entityIndex);
        }
    } catch {
        onWallHit(entity, entityIndex);
    }

    if (onEntityHit != undefined) {
        data.level.entities.forEach((otherEntity, otherEntityIndex) => {
            if (otherEntity !== entity && otherEntity.type != ENTITY_TYPES.BULLET && otherEntity.type != ENTITY_TYPES.ENEMY_BULLET && otherEntity.type != ENTITY_TYPES.FLAME && otherEntity.type != ENTITY_TYPES.LIGHT && otherEntity.type != ENTITY_TYPES.TEXTURED_LIGHT && otherEntity.type != ENTITY_TYPES.HEAL && otherEntity.type != ENTITY_TYPES.BATTERY) {
                if (otherEntity.alive == undefined || otherEntity.alive) {
                    DISTANCE_TO_ENTITY = Math.sqrt((otherEntity.x - entity.x)**2 + (otherEntity.y - entity.y)**2);
                    if (DISTANCE_TO_ENTITY <= (entity.radius * entity.moveSpeed + otherEntity.radius * otherEntity.moveSpeed) * data.render.defaultDelay * 0.08) {
                        onEntityHit(entity, entityIndex, otherEntity, otherEntityIndex);
                    }
                }
            }
        });
    }
    
    if (onPlayerHit != undefined) {
        DISTANCE_TO_PLAYER = Math.sqrt((data.player.x - entity.x)**2 + (data.player.y - entity.y)**2);
        if (DISTANCE_TO_PLAYER <= entity.radius * entity.moveSpeed + data.player.radius * data.player.moveSpeed) {
            onPlayerHit(entity, entityIndex);
        }
    }
}

function normalizeAngleRadians(angle) {
    angle %= 2 * Math.PI;
    if (angle > Math.PI) {
        angle -= 2 * Math.PI;
    } else if (angle < -Math.PI) {
        angle += 2 * Math.PI;
    }
    return angle;
}

function deadBand(axis, min = 0.1) {
    return (Math.abs(axis) > min ? axis : 0);
}

function bonk(gamepad) {
    if (!(data.keys.shootActive || (gamepad != null && gamepad.buttons[data.gamepadAPI.shootButton].pressed))) {
        data.player.justBonked = true;
        data.level.entities.forEach((entity) => {
            const DX = data.player.x - entity.x;
            const DY = data.player.y - entity.y;
            const DISTANCE_TO_PLAYER = Math.sqrt(DX ** 2 + DY ** 2);
            if (DISTANCE_TO_PLAYER < 0.9 && entity.isRendered && data.damageableEntities.includes(entity.type) && entity.alive) {
                damageEnemy(entity, 0.15);
                playSoundFromStart(doorSFX);
            }
        });
    }
}

function movePlayer() {
    data.player.justBonked = false;
    const MOVE_SPEED_WITH_DELTA = data.player.moveSpeed * data.render.delta;
    let gamepad = null;

    if (data.player.hp <= 15) {
        data.player.moveSpeed = data.player.normalMoveSpeed * 0.5;
        data.player.spinSpeed = data.player.normalSpinSpeed * 0.5;
    } else {
        data.player.moveSpeed = data.player.normalMoveSpeed;
        data.player.spinSpeed = data.player.normalSpinSpeed;
    }

    if (data.map[Math.floor(data.player.y)][Math.floor(data.player.x)] == 3) {
        nextLevel();
    }

    if (data.gamepadAPI.index != null && navigator.getGamepads()[data.gamepadAPI.index].axes) {
        gamepad = navigator.getGamepads()[data.gamepadAPI.index];
        let leftStickVector = {
            length: Math.sqrt(deadBand(gamepad.axes[data.gamepadAPI.leftXAxis]) ** 2 + deadBand(gamepad.axes[data.gamepadAPI.leftYAxis]) ** 2) < 1 ? Math.sqrt(deadBand(gamepad.axes[data.gamepadAPI.leftXAxis]) ** 2 + deadBand(gamepad.axes[data.gamepadAPI.leftYAxis]) ** 2) : 1,
            angle: Math.atan2(gamepad.axes[data.gamepadAPI.leftXAxis], -gamepad.axes[data.gamepadAPI.leftYAxis])
        }

        let movementAngle = leftStickVector.angle + degreeToRadians(data.player.angle);
        movementAngle = normalizeAngleRadians(movementAngle);

        let playerCos = Math.cos(movementAngle) * data.player.moveSpeed * leftStickVector.length;
        let playerSin = Math.sin(movementAngle) * data.player.moveSpeed * leftStickVector.length;

        moveAndSlide(data.player, playerCos, playerSin);
        data.animations.weaponBobbing += MOVE_SPEED_WITH_DELTA * leftStickVector.length;

        data.player.angle += (deadBand(gamepad.axes[data.gamepadAPI.rightXAxis])) * data.player.spinSpeed * 1.25 * data.render.delta;
        data.player.angle %= 360;
        if (data.player.angle < 0) {
            data.player.angle = 360 - data.player.spinSpeed * data.render.delta;
        }

        if (gamepad.buttons[data.gamepadAPI.bonkButton].pressed) {
            if (!data.gamepadAPI.bonkButtonPressed) {
                data.gamepadAPI.bonkButtonPressed = true;
                bonk(gamepad);
            }
        } else {
            data.gamepadAPI.bonkButtonPressed = false;
        }
    } else {
        if (data.keys.bonkJustPressed) {
            bonk(gamepad);
        }

        if (data.keys.upActive) {
            let playerCos = Math.cos(degreeToRadians(data.player.angle)) * data.player.moveSpeed;
            let playerSin = Math.sin(degreeToRadians(data.player.angle)) * data.player.moveSpeed;

            if (data.keys.strafeLeftActive || data.keys.strafeRightActive) {
                data.animations.weaponBobbing -= MOVE_SPEED_WITH_DELTA;
                moveAndSlide(data.player, playerCos * data.constants.ONE_OVER_SQRT_2, playerSin * data.constants.ONE_OVER_SQRT_2);
            } else {
                moveAndSlide(data.player, playerCos, playerSin);
            }
            data.animations.weaponBobbing += MOVE_SPEED_WITH_DELTA;
        } else if (data.keys.downActive) {
            let playerCos = -Math.cos(degreeToRadians(data.player.angle)) * data.player.moveSpeed;
            let playerSin = -Math.sin(degreeToRadians(data.player.angle)) * data.player.moveSpeed;
            
            if (data.keys.strafeLeftActive || data.keys.strafeRightActive) {
                data.animations.weaponBobbing -= MOVE_SPEED_WITH_DELTA;
                moveAndSlide(data.player, playerCos * data.constants.ONE_OVER_SQRT_2, playerSin * data.constants.ONE_OVER_SQRT_2);
            } else {
                moveAndSlide(data.player, playerCos, playerSin);
            }
            data.animations.weaponBobbing += MOVE_SPEED_WITH_DELTA;
        }

        if (data.keys.strafeLeftActive) {
            let playerCos = Math.cos(degreeToRadians(data.player.angle - 90)) * data.player.moveSpeed;
            let playerSin = Math.sin(degreeToRadians(data.player.angle - 90)) * data.player.moveSpeed;

            if (data.keys.upActive || data.keys.downActive) {
                moveAndSlide(data.player, playerCos * data.constants.ONE_OVER_SQRT_2, playerSin * data.constants.ONE_OVER_SQRT_2);
            } else {
                moveAndSlide(data.player, playerCos, playerSin);
            }
            data.animations.weaponBobbing += MOVE_SPEED_WITH_DELTA;
        }
        if (data.keys.strafeRightActive) {
            let playerCos = Math.cos(degreeToRadians(data.player.angle + 90)) * data.player.moveSpeed;
            let playerSin = Math.sin(degreeToRadians(data.player.angle + 90)) * data.player.moveSpeed;
            
            if (data.keys.upActive || data.keys.downActive) {
                moveAndSlide(data.player, playerCos * data.constants.ONE_OVER_SQRT_2, playerSin * data.constants.ONE_OVER_SQRT_2);
            } else {
                moveAndSlide(data.player, playerCos, playerSin);
            }
            data.animations.weaponBobbing += MOVE_SPEED_WITH_DELTA;
        }

        if (data.keys.strafeLeftActive && data.keys.strafeRightActive) {
            data.animations.weaponBobbing -= data.player.moveSpeed * 2 * data.render.delta;
        }

        if (data.keys.leftActive) {
            data.player.angle -= data.player.spinSpeed * data.render.delta;
            data.player.angle %= 360;
            if (data.player.angle < 0) {
                data.player.angle = 360 - data.player.spinSpeed * data.render.delta;
            }
        }
        if (data.keys.rightActive) {
            data.player.angle += data.player.spinSpeed * data.render.delta;
            data.player.angle %= 360;
        }
    }

    data.player.shootTimer += data.render.delta;

    if ((data.player.energy > 0) && (data.player.shootTimer >= data.player.shootCooldown) && (data.keys.shootActive || (gamepad != null && gamepad.buttons[data.gamepadAPI.shootButton].pressed))) {
        data.player.shootTimer = 0;
        data.player.energy -= data.player.energyPerShot;
        if (data.player.energy < 0) { data.player.energy = 0; }

        const BULLET_ANGLE = degreeToRadians(data.player.angle);
        let projectileVelocity = {
            x: Math.cos(BULLET_ANGLE),
            y: Math.sin(BULLET_ANGLE)
        };

        let e = createBullet(data.player.x, data.player.y, ENTITY_TYPES.BULLET, projectileVelocity);
        e.velocity.x *= e.moveSpeed;
        e.velocity.y *= e.moveSpeed;
        e.x += e.velocity.x * 200;
        e.y += e.velocity.y * 200;
        e.distanceToPlayer = Math.sqrt((data.player.x - e.x)**2 + (data.player.y - e.y)**2);
        data.level.entities.push(e);
        
    }

    // data.player.positionBufferMaxLength = Math.ceil((data.player.defaultPositionBufferMaxLength * data.render.defaultDelay) / data.render.delta);

    data.player.positionBuffer.push({ x: data.player.x, y: data.player.y });

    if (data.player.positionBuffer.length > data.player.positionBufferMaxLength) {
        data.player.positionBuffer.splice(0, 1);
    }

    data.keys.bonkJustPressed = false;
}

function renderEntities() {
    const PLAYER_X = data.player.x;
    const PLAYER_Y = data.player.y;
    const PLAYER_ANGLE = degreeToRadians(data.player.angle);
    const HALF_FOV = degreeToRadians(data.player.halfFov);
    const FOV = degreeToRadians(data.player.fov);
    const DEPTH_BUFFER = data.render.depthBuffer;
    
    data.level.entities.sort((a, b) => b.distanceToPlayer - a.distanceToPlayer);

    data.level.entities.forEach(entity => {
        if (entity.type != ENTITY_TYPES.LIGHT) {
            entity.isRendered = false;
            const DX = entity.x - PLAYER_X;
            const DY = entity.y - PLAYER_Y;
            const ANGLE_TO_ENTITY = Math.atan2(DY, DX); // radians
            const DISTANCE = Math.sqrt(DX ** 2 + DY ** 2) * Math.cos(ANGLE_TO_ENTITY - PLAYER_ANGLE); // distance with fisheye fix, it also fixes the bug where entities disapear while still not at the edges of the screen for some reason

            if (DISTANCE > 0.001) { // Avoid division by zero
                const WIDTH = entity.width * data.screen.scale / DISTANCE;
                const HEIGHT = entity.height * data.screen.scale / DISTANCE;
                
                const RELATIVE_ANGLE = normalizeAngleRadians(ANGLE_TO_ENTITY - PLAYER_ANGLE);

                const ENTITY_SCREEN_X = (RELATIVE_ANGLE + HALF_FOV) * (data.screen.width / FOV) - (WIDTH * 0.5);
                const ENTITY_SCREEN_Y = data.screen.halfViewWindowHeight - HEIGHT * 0.5;

                const BUFFER_INDEX = Math.floor(ENTITY_SCREEN_X + WIDTH * 0.5);
                if (BUFFER_INDEX >= 0 && BUFFER_INDEX < DEPTH_BUFFER.length) {
                    if (DISTANCE < DEPTH_BUFFER[BUFFER_INDEX] + data.rayCasting.resolution * 0.005 
                    || DISTANCE < DEPTH_BUFFER[BUFFER_INDEX + Math.floor((entity.radius * 0.2) / DISTANCE)] + data.rayCasting.resolution * 0.005 
                    || DISTANCE < DEPTH_BUFFER[BUFFER_INDEX - Math.floor((entity.radius * 0.2) / DISTANCE)] + data.rayCasting.resolution * 0.005
                    ) {
                        // Entity is closer than the current buffer distance
                        ctx.drawImage(entity.image, ENTITY_SCREEN_X, ENTITY_SCREEN_Y, WIDTH, HEIGHT);
                        entity.isRendered = true;
                    }
                }
            }
        }
    });
}

function moveAndUpdateEntities() {
    updateEntityPlayerVisibility();
    data.level.entities.forEach((entity, index) => {
        const DX = data.player.x - entity.x;
        const DY = data.player.y - entity.y;
        const DISTANCE = Math.sqrt(DX ** 2 + DY ** 2);
        const VECTOR_TO_PLAYER = {
            X: DX/(DISTANCE + 0.0001) * entity.moveSpeed,
            Y: DY/(DISTANCE + 0.0001) * entity.moveSpeed
        };

        const DX_DELAYED = data.player.positionBuffer[0].x - entity.x;
        const DY_DELAYED = data.player.positionBuffer[0].y - entity.y;

        entity.distanceToPlayer = DISTANCE;
        
        // static entities
        if (entity.type === ENTITY_TYPES.HEAL) {
            if (DISTANCE < 0.5) {
                data.player.hp += data.player.hpPerHeal;
                data.level.entities.splice(index, 1);
                playSoundFromStart(itemSFX);
                if (data.player.hp > data.player.maxHp) {
                    data.player.hp = data.player.maxHp;
                }
            }
        } else if (entity.type === ENTITY_TYPES.BATTERY) {
            if (DISTANCE < 0.5) {
                data.player.energy = data.player.maxEnergy;
                data.level.entities.splice(index, 1);
                playSoundFromStart(itemSFX);
            }
        } else if (entity.type === ENTITY_TYPES.LIGHT) {
            if (entity.time != undefined) {
                entity.time -= data.render.delta;
                if (entity.time <= 0) {
                    data.level.entities.splice(index, 1);
                }
            }
        } else if (entity.type === ENTITY_TYPES.TEXTURED_LIGHT) {
            if (entity.time != undefined) {
                entity.time -= data.render.delta;
                if (entity.time <= 0) {
                    data.level.entities.splice(index, 1);
                }
            }
        }
        // projectiles
        else if (entity.type === ENTITY_TYPES.BULLET) {
            while (data.level.entities.includes(entity)) {
                moveAndCollide(index, entity, entity.velocity.x, entity.velocity.y, deleteOnWall, damageAndDeleteOnEntity);
            }
        } else if (entity.type === ENTITY_TYPES.ENEMY_BULLET) {
            while (data.level.entities.includes(entity)) {
                moveAndCollide(index, entity, entity.velocity.x, entity.velocity.y, deleteOnWall, undefined, damageAndDeleteOnPlayer);
            }
        } else if (entity.type === ENTITY_TYPES.FLAME) {
                moveAndCollide(index, entity, entity.velocity.x, entity.velocity.y, deleteOnWall, undefined, damageAndDeleteOnPlayer);
        } 
        // enemies
        else if (entity.canSeePlayer && entity.alive) {
            if (entity.type === ENTITY_TYPES.SMALL_MELEE) {
                if (DISTANCE > 1) {
                    moveAndSlide(entity, VECTOR_TO_PLAYER.X, VECTOR_TO_PLAYER.Y);
                    entity.animation = {
                        currentFrame: entity.animation.currentFrame,
                        frameIncrement: 0.01,
                        frameList: [
                            melee1,
                            melee2,
                            melee3
                        ]
                    };
                } else {
                    if (Math.random() > 0.98) {
                        damagePlayer(entity.damage * data.render.delta * 0.04);
                    }

                    entity.animation = {
                        currentFrame: 0,
                        frameIncrement: 0,
                        frameList: [
                            entity.defaultFrame
                        ]
                    };
                }
            } else if (entity.type === ENTITY_TYPES.SMALL_RANGED) {
                if (DISTANCE > 3) {
                    moveAndSlide(entity, VECTOR_TO_PLAYER.X, VECTOR_TO_PLAYER.Y);
                    entity.animation = {
                        currentFrame: entity.animation.currentFrame,
                        frameIncrement: 0.01,
                        frameList: [
                            ranged1,
                            ranged2,
                            ranged3
                        ]
                    };
                } else if (DISTANCE < 2) {
                    moveAndSlide(entity, -0.75 * VECTOR_TO_PLAYER.X, -0.75 * VECTOR_TO_PLAYER.Y);
                    entity.animation = {
                        currentFrame: entity.animation.currentFrame,
                        frameIncrement: 0.01,
                        frameList: [
                            ranged1,
                            ranged2,
                            ranged3
                        ]
                    };
                } else {
                    entity.shootTimer += data.render.delta;
                    if (entity.shootTimer >= entity.shootCooldown) {
                        entity.shootTimer = 0;
                        let angle = normalizeAngleRadians(Math.atan2(DX_DELAYED, DY_DELAYED) + degreeToRadians(entity.projectileSpread * (Math.random() * 2 - 1)));
                        
                        let projectileVelocity = {
                            x: Math.sin(angle),
                            y: Math.cos(angle)
                        };
                        let e = createBullet(entity.x, entity.y, ENTITY_TYPES.ENEMY_BULLET, projectileVelocity);
                        e.velocity.x *= e.moveSpeed;
                        e.velocity.y *= e.moveSpeed;
                        e.x += e.velocity.x;
                        e.y += e.velocity.y;
                        e.distanceToPlayer = Math.sqrt((data.player.x - e.x)**2 + (data.player.y - e.y)**2);
                        data.level.entities.push(e);
                        playSoundFromStart(enemyShootSFX);
                    }
                    entity.animation = {
                        currentFrame: 0,
                        frameIncrement: 0,
                        frameList: [
                            entity.defaultFrame
                        ]
                    };
                }
            } else if (entity.type === ENTITY_TYPES.FLAMETHROWER) {
                if (DISTANCE > 3) {
                    entity.shootTimer += data.render.delta;
                    if (entity.shootTimer >= entity.shootCooldown) {
                        entity.shootTimer = 0;

                        for (let i = 0; i < entity.projectileCount; i++) {
                            let angle = normalizeAngleRadians(Math.atan2(DX_DELAYED, DY_DELAYED) + degreeToRadians(entity.projectileSpread * (i * 2 - entity.projectileCount)));
                            
                            let projectileVelocity = {
                                x: Math.sin(angle),
                                y: Math.cos(angle)
                            };
                            let e = createBullet(entity.x, entity.y, ENTITY_TYPES.FLAME, projectileVelocity);
                            e.velocity.x *= e.moveSpeed;
                            e.velocity.y *= e.moveSpeed;
                            e.x += e.velocity.x;
                            e.y += e.velocity.y;
                            e.distanceToPlayer = Math.sqrt((data.player.x - e.x)**2 + (data.player.y - e.y)**2);
                            data.level.entities.push(e);
                            if (Math.random() > 0.9) {
                                data.level.entities.push(createLight(entity.x, entity.y, 75, 25, 0, 100 + Math.random() * 100));
                            }
                            playSoundFromStart(flamethrowerSFX);
                        }
                    }

                    moveAndSlide(entity, VECTOR_TO_PLAYER.X, VECTOR_TO_PLAYER.Y);
                    entity.animation = {
                        currentFrame: entity.animation.currentFrame,
                        frameIncrement: 0.01,
                        frameList: [
                            flamethrower1,
                            flamethrower2,
                            flamethrower3
                        ]
                    };
                } else if (DISTANCE < 2) {
                    moveAndSlide(entity, -0.75 * VECTOR_TO_PLAYER.X, -0.75 * VECTOR_TO_PLAYER.Y);
                    entity.animation = {
                        currentFrame: entity.animation.currentFrame,
                        frameIncrement: 0.01,
                        frameList: [
                            flamethrower1,
                            flamethrower2,
                            flamethrower3
                        ]
                    };
                } else {
                    entity.shootTimer += data.render.delta;
                    if (entity.shootTimer >= entity.shootCooldown) {
                        entity.shootTimer = 0;

                        for (let i = 0; i < entity.projectileCount; i++) {
                            let angle = normalizeAngleRadians(Math.atan2(DX_DELAYED, DY_DELAYED) + degreeToRadians(entity.projectileSpread * (i * 2 - entity.projectileCount)));
                            
                            let projectileVelocity = {
                                x: Math.sin(angle),
                                y: Math.cos(angle)
                            };
                            let e = createBullet(entity.x, entity.y, ENTITY_TYPES.FLAME, projectileVelocity);
                            e.velocity.x *= e.moveSpeed;
                            e.velocity.y *= e.moveSpeed;
                            e.x += e.velocity.x;
                            e.y += e.velocity.y;
                            e.distanceToPlayer = Math.sqrt((data.player.x - e.x)**2 + (data.player.y - e.y)**2);
                            data.level.entities.push(e);
                            if (Math.random() > 0.9) {
                                data.level.entities.push(createLight(entity.x, entity.y, 75, 25, 0, 100 + Math.random() * 100));
                            }
                            playSoundFromStart(flamethrowerSFX);
                        }
                    }
                    entity.animation = {
                        currentFrame: 0,
                        frameIncrement: 0,
                        frameList: [
                            entity.defaultFrame
                        ]
                    };
                }
            } else if (entity.type === ENTITY_TYPES.HELICOPTER) {

                entity.velocity.x += VECTOR_TO_PLAYER.X * entity.acceleration;
                entity.velocity.y += VECTOR_TO_PLAYER.Y * entity.acceleration;

                entity.velocity.x *= 0.965;
                entity.velocity.y *= 0.965;

                entity.animation = {
                    currentFrame: 0,
                    frameIncrement: 0,
                    frameList: [
                        entity.defaultFrame
                    ]
                };

                moveAndCollide(index, entity, entity.velocity.x, entity.velocity.y, explode, explode, explode);

            } else if (entity.type === ENTITY_TYPES.LARGE_RANGED) {
                if (DISTANCE > 5) {
                    moveAndSlide(entity, VECTOR_TO_PLAYER.X, VECTOR_TO_PLAYER.Y);
                    entity.animation = {
                        currentFrame: entity.animation.currentFrame,
                        frameIncrement: 0.01,
                        frameList: [
                            largeRanged1,
                            largeRanged2,
                            largeRanged3
                        ]
                    };
                } else if (DISTANCE < 3) {
                    entity.shootTimer += data.render.delta;
                    if (entity.shootTimer >= entity.shootCooldown) {
                        entity.shootTimer = 0;
                        let angle = normalizeAngleRadians(Math.atan2(DX_DELAYED, DY_DELAYED) + degreeToRadians(entity.projectileSpread * (Math.random() * 2 - 1)));
                        
                        let projectileVelocity = {
                            x: Math.sin(angle),
                            y: Math.cos(angle)
                        };
                        let e = createBullet(entity.x, entity.y, ENTITY_TYPES.ENEMY_BULLET, projectileVelocity);
                        e.velocity.x *= e.moveSpeed;
                        e.velocity.y *= e.moveSpeed;
                        e.x += e.velocity.x;
                        e.y += e.velocity.y;
                        e.image = bigSpooderPew;
                        e.defaultFrame = bigSpooderPew;
                        e.width = 500;
                        e.height = 600;
                        e.damage = 10;
                        e.distanceToPlayer = Math.sqrt((data.player.x - e.x)**2 + (data.player.y - e.y)**2);
                        data.level.entities.push(e);
                        playSoundFromStart(enemyShootSFX);
                    }

                    moveAndSlide(entity, -0.75 * VECTOR_TO_PLAYER.X, -0.75 * VECTOR_TO_PLAYER.Y);
                    entity.animation = {
                        currentFrame: entity.animation.currentFrame,
                        frameIncrement: 0.01,
                        frameList: [
                            largeRanged1,
                            largeRanged2,
                            largeRanged3
                        ]
                    };
                } else {
                    entity.shootTimer += data.render.delta;
                    if (entity.shootTimer >= entity.shootCooldown) {
                        entity.shootTimer = 0;
                        let angle = normalizeAngleRadians(Math.atan2(DX_DELAYED, DY_DELAYED) + degreeToRadians(entity.projectileSpread * (Math.random() * 2 - 1)));
                        
                        let projectileVelocity = {
                            x: Math.sin(angle),
                            y: Math.cos(angle)
                        };
                        let e = createBullet(entity.x, entity.y, ENTITY_TYPES.ENEMY_BULLET, projectileVelocity);
                        e.velocity.x *= e.moveSpeed;
                        e.velocity.y *= e.moveSpeed;
                        e.x += e.velocity.x;
                        e.y += e.velocity.y;
                        e.image = bigSpooderPew;
                        e.defaultFrame = bigSpooderPew;
                        e.width = 500;
                        e.height = 600;
                        e.damage = 5;
                        e.distanceToPlayer = Math.sqrt((data.player.x - e.x)**2 + (data.player.y - e.y)**2);
                        data.level.entities.push(e);
                        playSoundFromStart(enemyShootSFX);
                    }
                    entity.animation = {
                        currentFrame: 0,
                        frameIncrement: 0,
                        frameList: [
                        entity.defaultFrame
                        ]
                    };
                }
            }

        } else {
            if (entity.alive) {
                entity.animation = {
                    currentFrame: 0,
                    frameIncrement: 0,
                    frameList: [
                        entity.defaultFrame
                    ]
                };
                if (entity.type == ENTITY_TYPES.HELICOPTER) {
                    entity.velocity.x *= 0.9;
                    entity.velocity.y *= 0.9;
                    moveAndCollide(index, entity, entity.velocity.x, entity.velocity.y, explode, explode, explode);
                }
            } else {
                if (entity.type == ENTITY_TYPES.HELICOPTER) {
                    entity.width = 400;
                    entity.height = 400;
                }
                entity.animation = {
                    currentFrame: 0,
                    frameIncrement: 0,
                    frameList: [
                        Date.now() - entity.laserTime < 10000 ? entity.deadFrame : entity.oldDeadFrame
                    ]
                };
            }
        }
    });
}

function updateDoors() {
    data.level.doors.forEach(door => {
        if (door.open) {
            data.map[door.y][door.x] = 0;
        } else {
            data.map[door.y][door.x] = door.textureMapId;
        }
    });
}

function drawTexture(x, wallHeight, textureX, texture, fadeMultiplier, brightnessModifier) {
    let yIncrementer = (wallHeight * 2) / texture.height;
    let y = data.screen.halfViewWindowHeight - wallHeight;
    
    for (let i = 0; i < texture.height; i++) {
        drawLine(x, y, x, y + (yIncrementer - 0.5), rgb((texture.colors[texture.bitmap[i][textureX]].r + brightnessModifier.r) * fadeMultiplier, (texture.colors[texture.bitmap[i][textureX]].g + brightnessModifier.g) * fadeMultiplier, (texture.colors[texture.bitmap[i][textureX]].b + brightnessModifier.b) * fadeMultiplier));
        y += yIncrementer;
    }
}

function drawCeiling(rayCount, wallHeight) {
    drawLine(rayCount, 0, rayCount, data.screen.halfViewWindowHeight - wallHeight, data.rayCasting.ceilingColorGradient);
}

function drawFloor(rayCount, wallHeight, fadeMultiplier, rayAngle, lightEntities) {
    if (wallHeight < data.screen.halfViewWindowHeight) {
        if (lightEntities.length > 0) {
            const RESOLUTION = data.rayCasting.floorResolution;
            const SCREEN_X = rayCount;
            const EYE_HEIGHT = data.screen.halfViewWindowHeight;
            const COS_ANGLE = Math.cos(degreeToRadians(rayAngle));
            const SIN_ANGLE = Math.sin(degreeToRadians(rayAngle));
            
            const STEP = (data.screen.viewWindowHeight - (data.screen.halfViewWindowHeight + wallHeight)) / RESOLUTION;

            for (let i = 0; i < RESOLUTION; i++) {
                const SCREEN_Y = data.screen.halfViewWindowHeight + wallHeight + STEP * i;
                const NEW_SCREEN_Y = data.screen.halfViewWindowHeight + wallHeight + STEP * (i + 1);

                let brightnessModifier = { r: 0, g: 0, b: 0 };

                const DISTANCE = (EYE_HEIGHT / (NEW_SCREEN_Y - EYE_HEIGHT)) / Math.cos(degreeToRadians(rayAngle - data.player.angle));
                const FLOOR_X = data.player.x + DISTANCE * COS_ANGLE;
                const FLOOR_Y = data.player.y + DISTANCE * SIN_ANGLE;

                for (let entity of lightEntities) {
                    if (raycastForWall(entity.x, entity.y, FLOOR_X, FLOOR_Y, true, 0.01)) {
                        const DX = FLOOR_X - entity.x;
                        const DY = FLOOR_Y - entity.y;
                        const ENTITY_DISTANCE = Math.sqrt(DX ** 2 + DY ** 2);
                        const MULTIPLIER = 1 / ENTITY_DISTANCE;
                        brightnessModifier.r += entity.light.r * MULTIPLIER;
                        brightnessModifier.g += entity.light.g * MULTIPLIER;
                        brightnessModifier.b += entity.light.b * MULTIPLIER;
                    }
                }
                drawLine(SCREEN_X, SCREEN_Y, SCREEN_X, NEW_SCREEN_Y, rgb((50 + brightnessModifier.r) * fadeMultiplier, (50 + brightnessModifier.g) * fadeMultiplier, (50 + brightnessModifier.b) * fadeMultiplier));
            }
        }
    }
}

function rayCasting() {
    ctx.fillStyle = rgb(15, 15, 15);
    ctx.fillRect(0, 0, data.screen.width, data.screen.height);
    const RAY_RESOLUTION = data.rayCasting.resolution; // Lower resolution
    ctx.lineWidth = RAY_RESOLUTION;
    let rayAngle = data.player.angle - data.player.halfFov;
    data.render.depthBuffer = [];
    let lightEntities = data.level.entities.filter(entity => entity.isLight);

    for (let rayCount = 0; rayCount <= data.screen.width; rayCount += RAY_RESOLUTION) { // Increased step size
        let ray = {
            x: data.player.x,
            y: data.player.y
        }

        let transparent = false;

        let rayCos = Math.cos(degreeToRadians(rayAngle));
        let raySin = Math.sin(degreeToRadians(rayAngle));
        let rayTan = Math.tan(degreeToRadians(rayAngle));
        let b = ray.y - rayTan * ray.x;

        let wall = 0;
        while (wall == 0) {
            let nextX = 0;
            let nextY = 0;
            let yAtNextX = 0;
            let xAtNextY = 0;

            if (rayCos == 0) {
                nextX = ray.x;
            } else if (rayCos > 0) {
                nextX = Math.ceil(ray.x);
                if (nextX == ray.x) {
                    nextX++;
                }
            } else {
                nextX = Math.floor(ray.x);
                if (nextX == ray.x) {
                    nextX--;
                }
            }

            yAtNextX = rayTan * nextX + b;

            if (raySin == 0) {
                nextY = ray.y;
            } else if (raySin > 0) {
                nextY = Math.ceil(ray.y);
                if (nextY == ray.y) {
                    nextY++;
                }
            } else {
                nextY = Math.floor(ray.y);
                if (nextY == ray.y) {
                    nextY--;
                }
            }

            xAtNextY = (nextY - b) / rayTan;

            if (Math.sqrt((data.player.x - nextX)**2 + (data.player.y - yAtNextX)**2) < Math.sqrt((data.player.x - xAtNextY)**2 + (data.player.y - nextY)**2)) {
                ray.x = nextX;
                ray.y = yAtNextX;
            } else {
                ray.x = xAtNextY;
                ray.y = nextY;
            }

            let mapX = Math.floor(ray.x);
            let mapY = Math.floor(ray.y);
            if (rayCos < 0) {mapX = Math.floor(ray.x - 0.0000001);}
            if (raySin < 0) {mapY = Math.floor(ray.y - 0.0000001);}
            if (!(data.transparentTiles.includes(data.map[mapY][mapX]) && transparent)) {
                if (data.transparentTiles.includes(data.map[mapY][mapX])) {
                    const WALL = data.map[mapY][mapX];
                    let distance = Math.sqrt((data.player.x - ray.x)**2 + (data.player.y - ray.y)**2);
                    distance *= Math.cos(degreeToRadians(rayAngle - data.player.angle));
                    drawWall(ray, WALL, distance, rayAngle, lightEntities, rayCount, transparent);
                    transparent = true;
                } else {
                    wall = data.map[mapY][mapX];
                }
            }
        }
        let distance = Math.sqrt((data.player.x - ray.x)**2 + (data.player.y - ray.y)**2);
        distance *= Math.cos(degreeToRadians(rayAngle - data.player.angle));

        drawWall(ray, wall, distance, rayAngle, lightEntities, rayCount, transparent);

        for (let r = 0; r < RAY_RESOLUTION; r++) {
            if (rayCount + r <= data.screen.width) {
                data.render.depthBuffer[rayCount + r] = distance;
            }
        }
        rayAngle += data.rayCasting.incrementAngle * RAY_RESOLUTION; // Increased angle step
    }
}

function drawWall(ray, wall, distance, rayAngle, lightEntities, rayCount, transparent) {   
    if (transparent) {
        ctx.globalAlpha = 0.5;
    }
    let wallHeight = Math.floor(data.screen.halfViewWindowHeight/distance);
    let fadeMultiplier = 1 / (distance * data.rayCasting.distanceFade + 1);

    let brightnessModifier = {
        r: 0,
        g: 0,
        b: 0
    };

    lightEntities.forEach(entity => {
        if (raycastForWall(entity.x, entity.y, ray.x, ray.y, true, 0.01)) {
            const DX = ray.x - entity.x;
            const DY = ray.y - entity.y;
            const DISTANCE = Math.sqrt(DX ** 2 + DY ** 2);
            const MULTIPLIER = 1 / DISTANCE;
            brightnessModifier.r += entity.light.r * MULTIPLIER;
            brightnessModifier.g += entity.light.g * MULTIPLIER;
            brightnessModifier.b += entity.light.b * MULTIPLIER;
        }
    });

    if (wall == 1) {
        drawCeiling(rayCount, wallHeight);
        drawLine(rayCount, data.screen.halfViewWindowHeight - wallHeight, rayCount, data.screen.halfViewWindowHeight + wallHeight, rgb((130 + brightnessModifier.r) * fadeMultiplier, (130 + brightnessModifier.g) * fadeMultiplier, (130 + brightnessModifier.b) * fadeMultiplier));
        drawFloor(rayCount, wallHeight, fadeMultiplier, rayAngle, lightEntities);
    } else {
        try {
            let texture = data.textures[wall - 2];
            let textureX = Math.floor((texture.width * (ray.x + ray.y)) % texture.width);

            drawCeiling(rayCount, wallHeight);
            drawTexture(rayCount, wallHeight, textureX, texture, fadeMultiplier, brightnessModifier);
            drawFloor(rayCount, wallHeight, fadeMultiplier, rayAngle, lightEntities);
        } catch {
            drawCeiling(rayCount, wallHeight);
            drawLine(rayCount, data.screen.halfViewWindowHeight - wallHeight, rayCount, data.screen.halfViewWindowHeight + wallHeight, rgb((130 + brightnessModifier.r) * fadeMultiplier, (130 + brightnessModifier.g) * fadeMultiplier, (130 + brightnessModifier.b) * fadeMultiplier));
            drawFloor(rayCount, wallHeight, fadeMultiplier, rayAngle, lightEntities);
        }
    }
    ctx.globalAlpha = 1;
}

function animations() {
    const SINE_PULSE_COLOR_MULTIPLIER = 75;

    data.animations.sinePulse %= 2 * Math.PI;
    data.animations.sinePulse += 0.0015 * data.render.delta;
    // glowy purple elevator
    data.textures[1].colors[0].r = 200 + SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse);
    data.textures[1].colors[0].g = 100 + SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse);
    data.textures[1].colors[0].b = 255 + SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse);

    data.textures[1].colors[1].r = 175 + SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse);
    data.textures[1].colors[1].g = 87 + SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse);
    data.textures[1].colors[1].b = 224 + SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse);
    // glowy green arrow
    data.textures[3].colors[2].g = 255 + SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse) * 2;
    // glowy green elevator
    data.textures[5].colors[0].r =  SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse);
    data.textures[5].colors[0].g = 255 + SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse);
    data.textures[5].colors[0].b = 170 + SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse);

    data.textures[5].colors[1].r = SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse);
    data.textures[5].colors[1].g = 224 + SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse);
    data.textures[5].colors[1].b = 155 + SINE_PULSE_COLOR_MULTIPLIER * Math.sin(data.animations.sinePulse);


    data.level.entities.forEach(entity => {
        entity.animation.currentFrame += entity.animation.frameIncrement * data.render.delta;
        entity.animation.currentFrame %= entity.animation.frameList.length;
        entity.image = entity.animation.frameList[Math.floor(entity.animation.currentFrame)];
    });
    
}

function raycastForWall(x1, y1, x2, y2, ignoreTransparent = false, targetRadius = 0) {
    try {
        const FUDGE = 0.0000001
        const DX = x2 - x1;
        const DY = y2 - y1;
        const SLOPE = DX === 0 ? null : DY / DX;
        const DISTANCE = Math.sqrt(DX ** 2 + DY ** 2);
        const X_VEL = DX/(DISTANCE);
        const Y_VEL = DY/(DISTANCE);
        let currentDistance = 0;
        let wall = 0;
        let ray = {
            x: x1,
            y: y1
        };

        const B = ray.y - SLOPE * ray.x;
        
        while ((data.walkableTiles.includes(wall) 
        || (ignoreTransparent ? data.transparentTiles.includes(wall) : false)) 
        && currentDistance < DISTANCE - targetRadius) {
            let nextX = 0;
            let nextY = 0;
            let yAtNextX = 0;
            let xAtNextY = 0;

            if (X_VEL == 0) {
                nextX = ray.x;
            } else if (X_VEL > 0) {
                nextX = Math.ceil(ray.x);
                if (nextX == ray.x) {
                    nextX++;
                }
            } else {
                nextX = Math.floor(ray.x);
                if (nextX == ray.x) {
                    nextX--;
                }
            }

            yAtNextX = SLOPE * nextX + B;

            if (Y_VEL == 0) {
                nextY = ray.y;
            } else if (Y_VEL > 0) {
                nextY = Math.ceil(ray.y);
                if (nextY == ray.y) {
                    nextY++;
                }
            } else {
                nextY = Math.floor(ray.y);
                if (nextY == ray.y) {
                    nextY--;
                }
            }

            xAtNextY = (nextY - B) / SLOPE;

            if (SLOPE == null) {
                // Vertical line
                ray.y = (Y_VEL > 0) ? Math.ceil(ray.y + FUDGE) : Math.floor(ray.y - FUDGE);
            } else {
                if (Math.sqrt((x1 - nextX)**2 + (y1 - yAtNextX)**2) < Math.sqrt((x1 - xAtNextY)**2 + (y1 - nextY)**2)) {
                    ray.x = nextX;
                    ray.y = yAtNextX;
                } else {
                    ray.x = xAtNextY;
                    ray.y = nextY;
                }
            }

            let mapX = Math.floor(ray.x);
            let mapY = Math.floor(ray.y);
            if (X_VEL < 0) {mapX = Math.floor(ray.x - FUDGE);}
            if (Y_VEL < 0) {mapY = Math.floor(ray.y - FUDGE);}
            wall = data.map[mapY][mapX];
            currentDistance = Math.sqrt((ray.x - x1) ** 2 + (ray.y - y1) ** 2);
        }

        return (ignoreTransparent ? data.walkableTiles.includes(wall) || data.transparentTiles.includes(wall) || currentDistance > DISTANCE - targetRadius : data.walkableTiles.includes(wall) || currentDistance > DISTANCE - targetRadius);
    } catch { return false; }
}

function updateEntityPlayerVisibility() {
    data.level.entities.forEach(entity => {
        entity.canSeePlayer = raycastForWall(entity.x, entity.y, data.player.x, data.player.y);
    });
}

function overLay() {
    const WEAPON_SIDE_LENGTH = 250 * data.screen.scale;
    const WEAPON_Y_OFFSET = data.screen.scale * (Math.sin(data.animations.weaponBobbing * /* rate */ 12) + 1);
    let currentWeaponImage = null;
    let gamepad = data.gamepadAPI.index != null ? navigator.getGamepads()[data.gamepadAPI.index] : null;

    if (data.player.energy > 0) {
        if (data.keys.shootActive || (gamepad != null && gamepad.buttons[data.gamepadAPI.shootButton].pressed)) {
            currentWeaponImage = pewPewFire;
        } else {
            if (data.player.justBonked) {
                currentWeaponImage = pewPewBonkOn;
            } else {
                currentWeaponImage = pewPewOn;
            }
        }
    } else {
        if (data.player.justBonked) {
            currentWeaponImage = pewPewBonkOff;
        } else {
            currentWeaponImage = pewPewOff;
        }
    }

    if (data.player.justBonked) {
        ctx.drawImage(currentWeaponImage, data.screen.halfWidth - WEAPON_SIDE_LENGTH * 0.3, data.screen.viewWindowHeight - WEAPON_SIDE_LENGTH * 0.6 + WEAPON_Y_OFFSET, WEAPON_SIDE_LENGTH * 0.6, WEAPON_SIDE_LENGTH * 0.6);
    } else {
        ctx.drawImage(currentWeaponImage, data.screen.halfWidth - WEAPON_SIDE_LENGTH * 0.5, data.screen.viewWindowHeight - WEAPON_SIDE_LENGTH + WEAPON_Y_OFFSET, WEAPON_SIDE_LENGTH, WEAPON_SIDE_LENGTH);
    }
    // draw rect over bottom
    const HUD_RECT_BORDER_THICKNESS = 4 * data.screen.scale;
    ctx.fillStyle = rgb(15, 10, 10);
    ctx.fillRect(0, data.screen.viewWindowHeight, data.screen.width, data.screen.height);
    ctx.fillStyle = rgb(0, 0, 0);
    ctx.fillRect(HUD_RECT_BORDER_THICKNESS, data.screen.viewWindowHeight + HUD_RECT_BORDER_THICKNESS, data.screen.width - 2*HUD_RECT_BORDER_THICKNESS, (data.screen.height - data.screen.viewWindowHeight) - 2*HUD_RECT_BORDER_THICKNESS);

    // draw hp
    ctx.textAlign = "left";
    if (data.player.hp < 0) {
        data.player.hp = 0;
        data.deathScreen.deathScreenTimer = 0.0;
        bkgTrack1.pause();
        playSoundFromStart(dieSFX);
    }
    ctx.fillStyle = rgb(255, 255, 255);
    ctx.font = data.screen.height < data.screen.width ? `${40 * data.screen.height / 480}px Pixel` : `${40 * data.screen.width / 640}px Pixel`;
    ctx.fillText(`${Math.ceil(data.player.hp)}% hp`, HUD_RECT_BORDER_THICKNESS * 4, data.screen.height - (data.screen.height - data.screen.viewWindowHeight) * 0.25);
    
    // draw energy bar
    const ENERGY_BAR_WIDTH = 100 * data.screen.scale;
    const ENERGY_BAR_HEIGHT = 20 * data.screen.scale;
    const ENERGY_BAR_X = data.screen.width - (8 * HUD_RECT_BORDER_THICKNESS + ENERGY_BAR_WIDTH);
    const ENERGY_BAR_Y = data.screen.viewWindowHeight + ((data.screen.height - data.screen.viewWindowHeight) * 0.5 - ENERGY_BAR_HEIGHT * 0.5);
    ctx.fillStyle = rgb(50, 50, 50);
    ctx.fillRect(ENERGY_BAR_X - HUD_RECT_BORDER_THICKNESS, ENERGY_BAR_Y - HUD_RECT_BORDER_THICKNESS, ENERGY_BAR_WIDTH + HUD_RECT_BORDER_THICKNESS * 2, ENERGY_BAR_HEIGHT + HUD_RECT_BORDER_THICKNESS * 2);
    ctx.fillStyle = rgb(100, 100, 100);
    ctx.fillRect(ENERGY_BAR_X, ENERGY_BAR_Y, ENERGY_BAR_WIDTH, ENERGY_BAR_HEIGHT);
    ctx.fillStyle = rgb(0, 255, 255, (Math.sin(data.animations.sinePulse * (data.player.energy < 25 ? 20 : 1.5)) + 1) * 0.25 + 0.5);
    ctx.fillRect(ENERGY_BAR_X, ENERGY_BAR_Y, ENERGY_BAR_WIDTH * data.player.energy * 0.01, ENERGY_BAR_HEIGHT);


    // draw red thing

    if (data.player.hp <= 25) {
        data.screen.minRed = (Math.sin(data.animations.sinePulse * 2) + 1) * (100 - 2 * data.player.hp);
    } else {
        data.screen.minRed = 0;
    }

    const NEW_RED = data.screen.currentRed - data.render.delta;
    if (NEW_RED >= data.screen.minRed) {
        data.screen.currentRed = NEW_RED;
    } else {
        data.screen.currentRed = data.screen.minRed;
    }

    // Create a radial gradient
    const GRADIENT = ctx.createRadialGradient(
        canvas.width / 2, canvas.height / 2, 0, // Inner circle
        canvas.width / 2, canvas.height / 2, canvas.width / 2 // Outer circle
    );

    // Add color stops
    GRADIENT.addColorStop(0, rgb(data.screen.currentRed, 0, 0, 0));
    GRADIENT.addColorStop(1, rgb(data.screen.currentRed, 0, 0, 0.5));

    // Fill the canvas with the gradient
    ctx.fillStyle = GRADIENT;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
}

function deathScreen() {
    let gamepad = null;

    const FADE_RATE = 0.0005;

    if (data.deathScreen.deathScreenTimer * FADE_RATE > 3.5) {
        data.player.canRespawn = true;
    } else {
        data.player.canRespawn = false;
    }
    if (data.deathScreen.deathScreenTimer * 0.0001 > 1) {
        clearScreen();
    }

    ctx.fillStyle = rgb(0, 0, 0, data.deathScreen.deathScreenTimer * 0.0001);
    ctx.fillRect(0, 0, data.screen.width, data.screen.height);
    data.deathScreen.deathScreenTimer += data.render.delta;

    ctx.textAlign = "center";
    
    ctx.fillStyle = rgb(255, 255, 255, data.deathScreen.deathScreenTimer * FADE_RATE - 1);
    ctx.font = 47 * (canvas.width / 640) + "px Pixel";
    ctx.fillText("game over", data.screen.halfWidth, canvas.height * 0.3);

    ctx.fillStyle = rgb(255, 255, 255, data.deathScreen.deathScreenTimer * FADE_RATE - 2);
    ctx.font = 10 * (canvas.width / 640) + "px Pixel";
    ctx.fillText(data.deathScreen.deathMessages[data.deathScreen.deathMessage], data.screen.halfWidth, canvas.height * 0.4);
    
    if (Math.floor(data.deathScreen.deathScreenTimer * 0.005) % 2 == 1 && data.player.canRespawn) {
        ctx.fillStyle = rgb(255, 0, 0, data.deathScreen.deathScreenTimer *FADE_RATE - 3);
    } else {
        ctx.fillStyle = rgb(255, 255, 255, data.deathScreen.deathScreenTimer * FADE_RATE - 3);
    }
    ctx.font = 10 * (canvas.width / 640) + "px Pixel";
    ctx.fillText("[ press anything to return to menu ]", data.screen.halfWidth, canvas.height * 0.6);

    if (data.gamepadAPI.index != null && navigator.getGamepads()[data.gamepadAPI.index].buttons && data.player.canRespawn) {
        gamepad = navigator.getGamepads()[data.gamepadAPI.index];
        gamepad.buttons.some(button => {
            if (button.pressed) {
                reset(0);
            }
            return button.pressed;
        });
    }
}

function startScreen() {
    let gamepad = null;

    const FADE_RATE = 0.0005;

    const TBD_TIME = 2; // 1
    const BKG_TIME = 0.5; // 2.5
    const HOW_TO_PLAY_TIME = 4;
    const DIFFICULTY_TIME = 4;
    const DIFFICULTY_TIME_2 = 4.2;
    const PLAY_TIME = 5;
    const PLAY_TIME_2 = 6;

    if (data.startScreen.startScreenTimer * FADE_RATE > PLAY_TIME_2) {
        data.startScreen.canStart = true;
    }

    clearScreen();
    data.startScreen.startScreenTimer += data.render.delta;

    ctx.fillStyle = rgb(15, 15, 15);
    ctx.fillRect(0, 0, data.screen.width, data.screen.height);

    try {
        const ALPHA = data.startScreen.startScreenTimer * FADE_RATE - BKG_TIME;
        ctx.globalAlpha = ALPHA >= 0 ? ALPHA : 0;
        let bkgWidth = 0;
        let bkgHeight = 0;
        if (data.screen.width > data.screen.height) {
            bkgWidth = data.screen.width;
            bkgHeight = (mainMenuBackground.height / mainMenuBackground.width) * bkgWidth;
        } else {
            bkgHeight = data.screen.height;
            bkgWidth = (mainMenuBackground.width / mainMenuBackground.height) * bkgHeight;
        }
        ctx.drawImage(mainMenuBackground, data.screen.halfWidth - bkgWidth * 0.5, 0 /*data.screen.height - bkgHeight*/, bkgWidth, bkgHeight);
        ctx.globalAlpha = 1;
    } catch {
        console.log("Main menu background no workie");
    }

    const ALPHA = data.startScreen.startScreenTimer * FADE_RATE - TBD_TIME;
    ctx.globalAlpha = ALPHA >= 0 ? ALPHA : 0;
    const LOGO_WIDTH = TBDLogo.width * data.screen.scale * 0.75;
    const LOGO_HEIGHT = TBDLogo.height * data.screen.scale * 0.75;
    ctx.drawImage(TBDLogo, data.screen.halfWidth - LOGO_WIDTH * 0.5, data.screen.viewWindowHeight * 0.05, LOGO_WIDTH, LOGO_HEIGHT);
    ctx.globalAlpha = 1;

    ctx.textAlign = "center";
    
    ctx.fillStyle = rgb(255, 255, 255, data.startScreen.startScreenTimer * FADE_RATE - DIFFICULTY_TIME);
    ctx.font = 10 * (canvas.width / 640) + "px Pixel";
    ctx.fillText(`difficulty (strafe to select):`, data.screen.halfWidth, canvas.height * 0.5);
    if (data.startScreen.difficulty == 0) {
        ctx.fillStyle = rgb(0, 255, 0, data.startScreen.startScreenTimer * FADE_RATE - DIFFICULTY_TIME_2);
        ctx.fillText(`[ too young to die ]`, data.screen.halfWidth, canvas.height * 0.6);
    } else if (data.startScreen.difficulty == 1) {
        ctx.fillStyle = rgb(255, 255, 0, data.startScreen.startScreenTimer * FADE_RATE - DIFFICULTY_TIME_2);
        ctx.fillText(`[ normal ]`, data.screen.halfWidth, canvas.height * 0.6);
    } else {
        ctx.fillStyle = rgb(255, 0, 0, data.startScreen.startScreenTimer * FADE_RATE - DIFFICULTY_TIME_2);
        ctx.fillText(`[ pro gamer ]`, data.screen.halfWidth, canvas.height * 0.6);
    }

    if (Math.floor(data.startScreen.startScreenTimer * 0.005) % 2 == 1 && data.startScreen.canStart) {
        ctx.fillStyle = rgb(255, 0, 0, data.startScreen.startScreenTimer * FADE_RATE - PLAY_TIME);
    } else {
        ctx.fillStyle = rgb(255, 255, 255, data.startScreen.startScreenTimer * FADE_RATE - PLAY_TIME);
    }
    ctx.font = 10 * (canvas.width / 640) + "px Pixel";
    ctx.fillText("[ press anything to start ]", data.screen.halfWidth, canvas.height * 0.75);

    ctx.fillStyle = rgb(255, 255, 255, data.startScreen.startScreenTimer * FADE_RATE - HOW_TO_PLAY_TIME);
    ctx.font = 7 * (canvas.width / 640) + "px Pixel";
    ctx.fillText(`press [h] for how to play guide`, data.screen.halfWidth, canvas.height * 0.9);
    ctx.fillText(`use [+] and [-] keys to change resolution`, data.screen.halfWidth, canvas.height * 0.95);

    if (data.gamepadAPI.index != null && navigator.getGamepads()[data.gamepadAPI.index].buttons) {
        gamepad = navigator.getGamepads()[data.gamepadAPI.index];
        if (data.startScreen.canStart) {
            gamepad.buttons.some(button => {
                if (button.pressed) {
                    start();
                }
                return button.pressed;
            });
        }
        // gamepad difficulty selection
        if (data.startScreen.startScreenTimer * FADE_RATE > DIFFICULTY_TIME_2 + 1) {
            if (deadBand(gamepad.axes[data.gamepadAPI.leftXAxis]) > 0) {
                if (data.startScreen.difficultyCanChange) {
                    data.startScreen.difficulty += 1;
                }
                data.startScreen.difficultyCanChange = false;
            } else if (deadBand(gamepad.axes[data.gamepadAPI.leftXAxis]) < 0) {
                if (data.startScreen.difficultyCanChange) {
                    data.startScreen.difficulty -= 1;
                }
                data.startScreen.difficultyCanChange = false;
            } else {
                data.startScreen.difficultyCanChange = true;
            }
        }
    } else {
        // keyboard difficulty selection
        if (data.startScreen.startScreenTimer * FADE_RATE > DIFFICULTY_TIME_2 + 0.5) {
            if (data.keys.strafeRightActive) {
                if (data.startScreen.difficultyCanChange) {
                    data.startScreen.difficulty += 1;
                }
                data.startScreen.difficultyCanChange = false;
            } else if (data.keys.strafeLeftActive) {
                if (data.startScreen.difficultyCanChange) {
                    data.startScreen.difficulty -= 1;
                }
                data.startScreen.difficultyCanChange = false;
            } else {
                data.startScreen.difficultyCanChange = true;
            }
        }
    }

    if (data.startScreen.difficulty < data.startScreen.minDifficulty) {
        data.startScreen.difficulty = data.startScreen.maxDifficulty;
    } else if (data.startScreen.difficulty > data.startScreen.maxDifficulty) {
        data.startScreen.difficulty = data.startScreen.minDifficulty;
    }

    let howToPlayHeight = data.screen.height;
    let howToPlayWidth = howToPlayHeight * (howToPlayImage.width / howToPlayImage.height);
    if (data.startScreen.showHowToPlay) {
        ctx.drawImage(howToPlayImage, 0, 0, howToPlayWidth, howToPlayHeight);
    }
}

// main loop
function main() {
    const CURRENT_TIME = Date.now();
    data.render.delta = CURRENT_TIME - data.render.previousTick;
    data.render.previousTick = CURRENT_TIME;
    const FADE_RATE = 0.0006;
    if (data.startScreen.gamePlaying) {
        if ((data.animations.fadeStartTime - CURRENT_TIME) * FADE_RATE > -1) {
            clearScreen();
            updateDoors();
            rayCasting();
            renderEntities();
            animations();
            overLay();
            ctx.fillStyle = rgb(0, 0, 0, (data.animations.fadeStartTime - CURRENT_TIME) * FADE_RATE + 1);
            ctx.fillRect(0, 0, data.screen.width, data.screen.height);
        } else if (data.player.hp > 0) {
            clearScreen();
            updateDoors();
            movePlayer();
            rayCasting();
            moveAndUpdateEntities();
            renderEntities();
            animations();
            overLay();
        } else {
            deathScreen();
        }
    } else {
        startScreen();
    }

    requestAnimationFrame(main);
}

function audioCheckAndStart() {
    let audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    if (audioCtx.state == "running") {
        setTimeout(function() {
            main();
            data.startScreen.startScreenTimer = 0;
            // start();
        }, 1);
    } else {
        if (data.gamepadAPI.index != null && navigator.getGamepads()[data.gamepadAPI.index].buttons) {
            let gamepad = navigator.getGamepads()[data.gamepadAPI.index];
        }
        ctx.textAlign = "center";
        ctx.fillStyle = rgb(255, 255, 255);
        ctx.font = 30 * data.screen.scale + "px Verdana";
        ctx.fillText("Press any button to enable sound", canvas.width/2, canvas.height/1.5);

        requestAnimationFrame(audioCheckAndStart);
    }
}

audioCheckAndStart();

</script>
</body>

<style>
    html, body {
        margin: 0;
        padding: 0;
        overflow: hidden;
    }
</style>

</html>